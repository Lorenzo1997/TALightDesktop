{"version":3,"file":"src_app_workers_python-compiler_worker_ts.js","mappings":"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","sources":["./node_modules/@angular-builders/custom-webpack/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack/bootstrap","webpack/runtime/define property getters","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","./src/app/workers/python-compiler.worker.ts"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/// <reference lib=\"webworker\" />\n// Configs\n\nlet pyodideRoot = \"/\"\nlet pyodideMount = \"/mnt\"\n\n// Bootstrap pyodide\n\nimportScripts(\"https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js\");\n\n\n//\n//wget https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js\n//wget https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide_py.tar\n//wget https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.asm.js\n//wget https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js.map\n//importScripts(\"./assets/pyodide.js\");\n\ndeclare var loadPyodide: any;\n\n//let worker: PyodideFsWorker;\nasync function main() {\n  let worker = new PyodideWorker(pyodideRoot, pyodideMount);\n}\n\n\n\n// Worker definition \n//TODO: import claees from pydiode-fsdriver\ntype PromiseResolver<T> = (value: T ) => void;\n\n\nexport interface FsNode {\n  name: string;\n  path: string;\n}\n\nexport interface FsNodeFolder extends FsNode {\n  folders: FsNodeFolder[];\n  files: FsNodeFile[];\n}\nexport interface FsNodeFile extends FsNode {\n  content: string|ArrayBuffer\n}\n\nexport enum PyodideState {\n  Unknown = 'Unknown',\n  Loading = 'Loading',\n  Ready = 'Ready',\n  Run = 'Run',\n  Stdin = 'Stdin',\n  Success = 'Success',\n  Killed = 'Killed',\n  Error = 'Error',\n}\n\nexport enum PyodideMessageType {\n  Ready = 'Ready', // Deprecated -> SubscribeState\n  Mount = 'Mount', //TODO\n  Unmount = 'Unmount', //TODO\n  InstallPackages = 'InstallPackages',\n  ExecuteFile = 'ExecuteFile',\n  ExecuteCode = 'ExecuteCode',\n  StopExecution = 'StopExecution',\n  SubscribeNotify = 'SubscribeNotify',\n  SubscribeState = 'SubscribeState',\n  SubscribeStdout = 'SubscribeStdout',\n  SubscribeStderr = 'SubscribeStderr',\n  SendStdin = 'SendStdin',\n  CreateDirectory = 'CreateDirectory',\n  WriteFile = 'WriteFile',\n  ReadFile = 'ReadFile',\n  ReadDirectory = 'ReadDirectory',\n  ScanDirectory = 'ScanDirectory',\n  Exists = 'Exists',\n  Delete = 'Delete', \n}\n\nexport interface PyodideMessage {\n  uid: string;\n  type: PyodideMessageType;\n  args: string[];\n  contents: Array<string|ArrayBuffer>;\n}\n\nexport interface PyodideRequest {\n  uid: string;\n  timestamp: number;\n  message: PyodideMessage;\n}\n\nexport interface PyodideResponse {\n  uid: string;\n  timestamp: number;\n  success: boolean;\n  message: PyodideMessage;\n  errors: string[];\n}\n\nexport type FsMessageHandler = (message:PyodideRequest)=>PyodideResponse;\n\nclass PyodideWorker{\n  \n  requestQueueNotify = new Map<string,PyodideRequest>();\n  requestQueueState = new Map<string,PyodideRequest>();\n  requestQueueStdout = new Map<string,PyodideRequest>();\n  requestQueueStderr = new Map<string,PyodideRequest>();\n\n  public binEncoder = new TextEncoder(); // always utf-8\n  public binDecoder = new TextDecoder(\"utf-8\");\n\n  pyodide: any;\n  fs: any;\n  loadPyodide: any;\n  micropip: any;\n  root:string;\n  mount:string;\n  isReady = false;\n  readyPromise: Promise<boolean>;\n  readyResolver: PromiseResolver<boolean>;\n  stdinPending=false;\n  stdinResolver?: PromiseResolver<string>;\n  isSync = false;\n  needSync = false;\n  stdinBuffer = new Array<string>();\n  lastState = PyodideState.Unknown\n  lastResult?:any\n  interruptBuffer = new Uint8Array(1);\n  interruptTimer:any\n  \n  constructor(root:string, mount:string ){\n    this.root = root;\n    this.mount = mount;\n\n    this.requestQueueStdout = new Map();\n    this.requestQueueStderr = new Map();\n    \n    //onReady\n    let readyResolver: PromiseResolver<boolean>;\n    this.readyPromise =  new Promise<boolean>((resolve, reject) => {\n      readyResolver = resolve;\n    })\n    this.readyResolver = (value)=>{ readyResolver(value) }\n\n    \n    addEventListener(\"message\", async ( payload:any ) => { this.onData(payload.data) })\n    \n    //Send Init event, but outside the constructor\n    setTimeout(()=>{this.sendState(PyodideState.Loading)})\n\n  \n    this.initPydiode().then(()=>{\n      this.load(this.root, this.mount);\n      this.fs.syncfs(true,()=>{\n        \n        this.interruptBuffer[0]=0\n        this.pyodide.setInterruptBuffer(this.interruptBuffer)\n        this.isReady = true;\n        this.sendState(PyodideState.Ready)\n        this.readyResolver(this.isReady);\n        \n      });\n    }).catch( (error:any)=>{\n      this.sendState(PyodideState.Error, error)\n    });\n\n\n  }\n\n  async initPydiode(){\n    \n    console.log(\"loadPyodide: ...\")\n    \n    let options = {\n      stdin: ()=>{return this.onStdin()},\n      stdout: (msg:string)=>{this.sendStdout(msg)},\n      stderr: (msg:string)=>{this.sendStderr(msg)},\n    }\n\n    //console.log(loadPyodide)\n    this.pyodide = await loadPyodide(options);\n    this.fs = this.pyodide.FS;\n    await this.pyodide.loadPackage([\"micropip\"]);\n    this.micropip = this.pyodide.pyimport(\"micropip\");\n    \n    console.log(\"loadPyodide: done\")\n    //console.log(pyodide)\n\n    this.setCustomHooks()\n  }\n\n  async setCustomHooks(){\n    let oldInput = this.pyodide.globals.input;\n    console.log(\"setCustomHooks:oldInput:\",oldInput)\n\n\n    //Globals: Input\n    let localThis = this;\n    this.pyodide.globals.set('input', async function (prompt?:string) {\n      if (prompt && prompt.trim().length>0){localThis.sendStdout(prompt)}\n\n      localThis.sendState(PyodideState.Stdin)\n      console.log(\"setCustomHooks:scrivo sulla consolle!!!!\")\n      let stdinResolver: PromiseResolver<string>;      \n      let promise =  new Promise<string>((resolve, reject) => {\n        stdinResolver = resolve;\n      })\n      localThis.stdinResolver = (message:string)=>{ stdinResolver(message) }\n\n      if(localThis.stdinBuffer.length>0){\n        let line = localThis.stdinBuffer.shift()\n        localThis.stdinResolver(line!)\n      }\n\n      return promise;\n    });\n\n    let sys = this.pyodide.pyimport(\"signal\");\n    let signal = this.pyodide.pyimport(\"signal\");\n    signal.signal(signal.SIGINT, (signal:any, frame:any)=>{ sys.exit(0) })\n\n\n\n\n\n  }\n\n  async load(root:string, mount:string)\n  {\n    this.root = root;\n    this.mount = mount;\n    console.log(\"PyodideFsWorker: load\")\n    this.fs.mkdir(this.mount);\n    this.fs.mount(this.fs.filesystems.IDBFS, { root: root }, this.mount);\n    console.log(\"PyodideFsWorker: load: done\")\n\n    \n    console.log(this.fs.mounts)\n    console.log(this.fs.root)\n    console.log(this.fs.root.mount)\n  }\n\n  toString(data:string|ArrayBuffer){\n    if(data instanceof ArrayBuffer) { return this.binDecoder.decode(data) }\n    return data\n  }\n\n  toArrayBuffer(data:string|ArrayBuffer){\n    if(data instanceof ArrayBuffer) { return data }\n    return this.binEncoder.encode(data)\n  }\n  \n  \n  responseFromRequest(request:PyodideRequest, success:boolean=true, errors:string[]=[]):PyodideResponse{\n    let response:PyodideResponse = {\n      uid: request.uid,\n      timestamp: Date.now(),\n      success: success,\n      errors: errors,\n      message: {\n        uid: request.message.uid,\n        type: request.message.type,\n        args:[],\n        contents:[]\n      }\n    };\n    return response\n  }\n\n  responseError(response:PyodideResponse, error?:string):PyodideResponse{\n    response.success = false;\n    if (error){response.errors.push(error)};\n    return response;\n  }\n\n  syncFS(){\n    if (!this.isSync){\n      this.isSync = true\n      this.needSync = false;\n      console.log('syncFS: do!');\n      this.fs.syncfs((err?:any)=>{\n        if(err){\n          console.log('syncFS: error while syncing, retrying')\n          this.needSync = true;\n        }\n        this.isSync = false;\n        if (this.needSync){\n          this.needSync = false;\n          console.log('syncFS: repeat!');\n          this.syncFS()\n        }\n      })\n    }\n    else{\n      console.log('syncFS: queued');\n      this.needSync = true;\n    }\n  }\n\n  onStdin(){\n    //TOD: unused??\n    // localThis.sendState(PyodideState.Stdin)\n    console.log('PyodideWorker:onStdin:');   \n    if (this.stdinBuffer.length > 0){}\n    let item = this.stdinBuffer.shift()\n    console.log('PyodideWorker:onStdin:', item);\n    return item\n  }\n\n  execCodeAsync(code:string){\n    console.log(\"execCode:\",code)\n    this.interruptBuffer[0]=0\n    this.pyodide.setInterruptBuffer(this.interruptBuffer)\n    this.interruptTimer = setInterval(()=>{\n      try{ this.pyodide.checkInterrupt() }\n      catch(_){ \n        this.sendStderr(\"Process terminated by user request\")\n        this.sendState(PyodideState.Killed)\n      }\n    },10)\n\n    this.stdinBuffer = []\n    \n    this.pyodide.runPythonAsync(code).then( (result:any)=>{\n      console.log(\"execCode: result:\\n\",result)\n      this.sendState(PyodideState.Success, result)\n    }).catch( (error:any)=>{\n      let sysmodule = this.pyodide.pyimport(\"sys\");\n      console.log(\"execCode: exception:\\n\", sysmodule.exception)\n      console.log(\"execCode: error:\\n\", error)\n      this.sendState(PyodideState.Error, error)\n      \n    })\n  }\n\n  sendNotify(title: string, msg:string, kind:string=\"\"){\n    console.log(\"sendNotify: \",msg)\n    this.requestQueueNotify.forEach(( request:PyodideRequest, uid:string )=>{\n      let response = this.responseFromRequest(request); \n      response.message.contents = [title, msg, kind]\n      console.log(\"sendNotify:uid:\\n\",response)//,res)\n      postMessage(response)\n    })\n  }\n\n  sendState(state?: PyodideState, content?:any){\n    if(!state){ state = this.lastState } //Resend the same state, used onSubscribe\n    else { this.lastState = state }\n    \n    console.log(\"sendState: \",state)\n    this.requestQueueState.forEach(( request:PyodideRequest, uid:string )=>{\n      let response = this.responseFromRequest(request); \n      response.message.contents = [state ?? PyodideState.Unknown]\n      if(content){\n        response.message.contents.push(content)\n      }\n      console.log(\"sendState:uid:\\n\",response)\n      postMessage(response)\n    })\n  }\n\n  sendStdout(msg:string){\n    console.log(\"sendStdout: \"+msg)\n    this.requestQueueStdout.forEach(( request:PyodideRequest, uid:string )=>{\n      let response = this.responseFromRequest(request); \n      response.message.contents = [msg]\n      console.log(\"sendStdout:uid:\\n\",response)//,res)\n      postMessage(response)\n    })\n  }\n\n  sendStderr(msg:string){\n    console.log(\"sendStderr: \"+msg)\n    this.requestQueueStderr.forEach(( request:PyodideRequest, uid:string )=>{\n      let response = this.responseFromRequest(request); \n      response.message.contents = [msg]\n      console.log(\"sendStderr:uid:\\n\",response)//,res)\n      postMessage(response)\n    })\n  }\n\n  onData(request:PyodideRequest) {\n    console.log('PyodideFsWorker:onData:',request);\n    let action: FsMessageHandler | null = null;\n\n    switch (request.message.type) {\n      case PyodideMessageType.Ready:\n        this.ready(request);\n        break;\n      case PyodideMessageType.SubscribeNotify:\n        action=(request)=>{return this.subscribeNotify(request)};\n        break;\n      case PyodideMessageType.SubscribeState:\n        action=(request)=>{return this.subscribeState(request)};\n        break;\n      case PyodideMessageType.SubscribeStdout:\n        action=(request)=>{return this.subscribeStdout(request)};\n        break;\n      case PyodideMessageType.SubscribeStderr:\n        action=(request)=>{return this.subscribeStderr(request)};\n        break;\n      case PyodideMessageType.SendStdin:\n        action=(request)=>{return this.sendStdin(request)};\n        break;\n      case PyodideMessageType.InstallPackages:\n        action=(request)=>{return this.installPackages(request)};\n        break;\n      case PyodideMessageType.ExecuteCode:\n        action=(request)=>{return this.executeCode(request)};\n        break;\n      case PyodideMessageType.ExecuteFile:\n        action=(request)=>{return this.executeFile(request)};\n        break;\n      case PyodideMessageType.StopExecution:\n        action=(request)=>{return this.stopExecution(request)};\n        break;\n      case PyodideMessageType.CreateDirectory:\n        action=(request)=>{return this.createDirectory(request)};\n        break;\n      case PyodideMessageType.ReadDirectory:\n        action=(request)=>{return this.readDirectory(request)};\n        break;\n      case PyodideMessageType.WriteFile:\n        action=(request)=>{return this.writeFile(request)};\n        break;\n      case PyodideMessageType.ReadFile:\n        action=(request)=>{return this.readFile(request)};\n        break;\n      case PyodideMessageType.ScanDirectory:\n        action=(request)=>{return this.scanDirectory(request)};\n        break;\n      case PyodideMessageType.Delete:\n        action=(request)=>{return this.delete(request)};\n        break;\n      case PyodideMessageType.Exists:\n        action=(request)=>{return this.exists(request)};\n        break;\n      default: break;\n    }\n    if(action){ \n      let response = action(request);\n      if (response){ postMessage(response) }\n    }\n  }\n\n  ready(request:PyodideRequest){\n    let response = this.responseFromRequest(request);\n    response.message.args = ['true'];\n    if (this.isReady) {\n      postMessage(response);\n    }else{\n      this.readyPromise.then((ready)=>{\n        response.message.args = [ready?'true':'false'];\n        postMessage(response);\n      })\n    }\n  }\n\n  installPackages(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let packages = request.message.args;\n    console.log(\"installPackages:\\n\",packages)//,res)\n    let res = this.micropip.install(packages)\n    this.syncFS()\n    console.log(\"installPackages: DONE!\\n\",res)\n    response.message.contents.push(\"\")//res+\": \"+res)\n    \n    return response;\n  }\n\n  executeCode(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let rawContent = request.message.contents[0];\n    let code;\n    if(rawContent instanceof ArrayBuffer){\n      code = new TextDecoder().decode(rawContent);\n    }else{\n      code = rawContent\n    }\n    console.log(\"executeCode:\\n\",code)//,res)\n    this.execCodeAsync(code)\n\n\n    response.message.contents = [\"true\"]\n    \n    return response;\n  }\n\n  stopExecution(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let wasRunning = this.lastState == PyodideState.Run || this.lastState == PyodideState.Stdin\n    \n    let arg = request.message.args[0] ?? \"2\"\n    let signal = parseInt(arg); // 2 stands for SIGINT.\n    if(isNaN(signal)){signal = 2}\n    console.log(\"stopExecution:\",signal)//,res)\n    setTimeout(()=>{this.interruptBuffer[0] = signal})\n\n    response.message.args = [wasRunning?\"true\":\"false\"]\n    return response\n  }\n\n  executeFile(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let fullpath = request.message.args[0];\n    let path = this.mount +\"/\"+ fullpath\n    console.log(\"executeFile:\",path)//,res)\n    \n    let rawContent = this.fs.readFile(path) as Uint8Array\n    let code = new TextDecoder().decode(rawContent.buffer);\n\n    this.stdinBuffer = []\n    this.execCodeAsync(code)\n\n    response.message.contents = [\"true\"]\n    return response\n  }\n\n  subscribeNotify(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let enable = request.message.args[0] == 'true';\n    if (enable){\n      this.requestQueueNotify.set(request.uid, request)\n    } else{\n      this.requestQueueNotify.delete(request.uid)\n    }\n    console.log(\"subscribeNotify:\\n\", enable)//,res)\n    response.message.args = [enable?'true':'false']\n    return response;\n  }\n\n  subscribeState(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let enable = request.message.args[0] == 'true';\n    if (enable){\n      this.requestQueueState.set(request.uid, request)\n      setTimeout(()=>{this.sendState(PyodideState.Loading)})\n    } else {\n      this.requestQueueState.delete(request.uid)\n    }\n    console.log(\"subscribeState:\\n\", enable)//,res)\n    response.message.args = [enable?'true':'false']\n    return response;\n  }\n\n  subscribeStdout(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let enable = request.message.args[0] == 'true';\n    if (enable){\n      this.requestQueueStdout.set(request.uid, request)\n    } else{\n      this.requestQueueStdout.delete(request.uid)\n    }\n    console.log(\"subscribeStdout:\\n\", enable)//,res)\n    response.message.args = [enable?'true':'false']\n    return response;\n  }\n\n  subscribeStderr(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let enable = request.message.args[0] == 'true';\n    if (enable){\n      this.requestQueueStderr.set(request.uid, request)\n    } else{\n      this.requestQueueStderr.delete(request.uid)\n    }\n    console.log(\"subscribeStderr:\\n\", enable)//,res)\n    response.message.args = [enable?'true':'false']\n    return response;\n  }\n\n  sendStdin(request:PyodideRequest){\n    let response = this.responseFromRequest(request); \n    let data = request.message.contents[0];\n    console.log(\"PyodideWorker:sendStdin:\\n\",data)\n    this.sendState(PyodideState.Run)\n    if (this.stdinResolver){\n      this.stdinResolver(this.toString(data))\n      this.stdinResolver=undefined\n    }else{\n      this.stdinBuffer.push(this.toString(data))\n    }\n    response.message.args = ['true']\n    \n    return response;\n  }\n\n  createDirectory(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request); \n    if ( request.message.args.length < 1 ){ \n      return this.responseError(response,\"createDirectory: Requires at least 1 path as argument\");\n    }\n    //TODO: allow for multiple queries;\n    let fullpath = request.message.args[0];\n    if(!this.internal_exists(this.mount + fullpath)){\n      let res = this.fs.mkdir(this.mount + fullpath);\n      console.log('pydiode:mkdir:',res)\n      this.syncFS()\n    }\n    response.message.args = [fullpath];\n    return response;\n  }\n\n  getPath(node:any){\n    //any: https://emscripten.org/docs/api_reference/Filesystem-API.html#FS.getPath\n    let path = this.fs.getPath(node)\n    let pattern =  new RegExp(\"^\"+this.mount); \n    return path.replace(pattern,\"/\").replace(/\\/\\/+/,\"/\");\n  }\n\n  readDirectory(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request); \n    if ( request.message.args.length < 1 ){\n      return this.responseError(response,\"readDirectory: Requires at least 1 path as argument and 1 content\");\n    }\n    let fullpath = request.message.args[0];\n    let curDir = this.scanDirectory_recursive(fullpath)\n    response.message.args = [fullpath];\n    response.message.contents = [JSON.stringify(curDir,this.jsonReplacer)]\n    return response;\n  }\n\n\n  scanDirectory(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request); \n    if ( request.message.args.length < 1 ){\n      return this.responseError(response,\"readDirectory: Requires at least 1 path as argument and 1 content\");\n    }\n    let fullpath = request.message.args[0];\n    console.log(\"scanDirectory: \", fullpath)\n    let curDir = this.scanDirectory_recursive(fullpath, true)\n    response.message.args = [fullpath];\n    response.message.contents = [JSON.stringify(curDir,this.jsonReplacer)]\n    return response;\n  }\n\n  jsonReplacer(key:any,value:any){\n    if (value instanceof ArrayBuffer){\n      let buffer = new Uint8Array(value)\n      return {\n        constructor: value.constructor.name,\n        data: Array.from(buffer),\n        flags: []\n      }\n    }\n    return value\n  }\n\n\n  scanDirectory_recursive(fullpath:string, recursive=false):FsNodeFolder{\n    let res = this.fs.lookupPath(this.mount + fullpath);\n    console.log(\"scanDirectory_recursive: \", res)\n    console.log(\"scanDirectory_recursive:contents: \", res.node.contents);\n    let curDir:FsNodeFolder = {\n      folders: [],\n      files: [],\n      name: res.node.name,\n      path: this.getPath(res.node)\n    };\n\n    for(let name in res.node.contents){\n      let item = res.node.contents[name];\n      let path = this.getPath(item);\n      if (this.fs.isDir(item.mode)){\n        let childDir;\n        if (recursive){\n          childDir = this.scanDirectory_recursive(path, true);\n        }\n        else{\n          childDir = {\n            folders: [],\n            files: [],\n            name: name,\n            path: path\n          }\n        }\n        curDir.folders.push(childDir);\n      }else{\n        let content = this.fs.readFile(this.mount + path)\n        curDir.files.push({\n          name: name,\n          path: path,\n          content: content.buffer\n        })\n      }\n    }\n\n    return curDir;\n  }\n\n  writeFile(request:PyodideRequest):PyodideResponse{\n    \n    let response = this.responseFromRequest(request);\n    let nargs = request.message.args.length;\n    let ncont = request.message.contents.length\n    if ( nargs < 1 || nargs < ncont ){ \n      return this.responseError(response,\"writeFile: Requires at least 1 path as argument and 1 content\");\n    }\n    \n    let fullpath = request.message.args[0];\n    let data = request.message.contents[0];\n    let content;\n    let options = {encoding: \"binary\"}\n    if (data instanceof ArrayBuffer){\n      content = new Uint8Array(data)\n      options.encoding = \"utf8\"\n    }else{\n      content = data\n    }\n\n    console.log(\"writeFile: \", fullpath)\n    console.log(\"writeFile:content: \", content)\n    let res = this.fs.writeFile(this.mount + fullpath, content, options);\n    console.log(\"writeFile:res: \", res)\n    this.syncFS()\n    return response;\n  }\n\n  readFile(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request);\n    if ( request.message.args.length < 1){ \n      return this.responseError(response,\"readFile: Requires at least 1 path as argument\");\n    }\n     \n    let fullpath = request.message.args[0];\n\n    let opts:{} = { encoding: 'utf8' }\n    if (request.message.args.length == 2 && request.message.args[1] == 'binary' ){\n      opts = {encoding: 'binary'} \n    }\n\n    console.log(\"readFile: \", fullpath)\n    let content = this.fs.readFile(this.mount + fullpath, opts);\n    console.log('readFile:content:\\n', content.length)\n    if(content instanceof Uint8Array){\n      console.log('readFile:content: BUFFER',content)\n      response.message.contents = [content.buffer];\n    }\n    else{\n      console.log('readFile:content: STRING')\n      response.message.contents = [content];\n    }\n    return response;\n  }\n\n  delete(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request); \n    \n    if (request.message.args.length < 1){\n      response.message.args = [\"false\"]\n      return response;  \n    }\n\n    \n    let fullpath = request.message.args[0];\n    console.log(\"delete: \", fullpath)\n    //TODO: use lookupPath and isDir/isFile\n    // https://emscripten.org/docs/api_reference/Filesystem-API.html#FS.lookupPath\n    //TODO: do it recursive\n    try{this.fs.rmdir(this.mount + fullpath)}catch(_){}\n    try{this.fs.unlink(this.mount + fullpath)}catch(_){}\n    this.syncFS()\n    response.message.args = [\"true\"]\n    return response;\n  }\n\n  exists(request:PyodideRequest):PyodideResponse{\n    let response = this.responseFromRequest(request); \n    if (request.message.args.length < 1){\n      response.message.args = [\"false\"]\n      return response;  \n    }\n    let fullpath = request.message.args[0];\n    console.log(\"exists: \", this.mount + fullpath)\n    // https://emscripten.org/docs/api_reference/Filesystem-API.html#FS.analyzePath\n    let exists = this.internal_exists(this.mount + fullpath)\n    console.log(\"exists:\", exists)\n    response.message.args = [exists?'true':'false']\n    return response;\n  }\n\n  internal_exists(path:string){\n    let res = this.fs.analyzePath(path)\n    console.log(\"internal_file_exists:analyzePath\", res)\n    return res[\"exists\"]\n  }\n}\n  \n\n\n\nmain()\n"],"names":["pyodideRoot","pyodideMount","importScripts","main","worker","PyodideWorker","PyodideState","PyodideMessageType","constructor","root","mount","Map","TextEncoder","TextDecoder","Array","Unknown","Uint8Array","requestQueueStdout","requestQueueStderr","readyResolver","readyPromise","Promise","resolve","reject","value","addEventListener","payload","onData","data","setTimeout","sendState","Loading","initPydiode","then","load","fs","syncfs","interruptBuffer","pyodide","setInterruptBuffer","isReady","Ready","catch","error","Error","console","log","options","stdin","onStdin","stdout","msg","sendStdout","stderr","sendStderr","loadPyodide","FS","loadPackage","micropip","pyimport","setCustomHooks","oldInput","globals","input","localThis","set","prompt","trim","length","Stdin","stdinResolver","promise","message","stdinBuffer","line","shift","sys","signal","SIGINT","frame","exit","mkdir","filesystems","IDBFS","mounts","toString","ArrayBuffer","binDecoder","decode","toArrayBuffer","binEncoder","encode","responseFromRequest","request","success","errors","response","uid","timestamp","Date","now","type","args","contents","responseError","push","syncFS","isSync","needSync","err","item","execCodeAsync","code","interruptTimer","setInterval","checkInterrupt","_","Killed","runPythonAsync","result","Success","sysmodule","exception","sendNotify","title","kind","requestQueueNotify","forEach","postMessage","state","content","lastState","requestQueueState","action","ready","SubscribeNotify","subscribeNotify","SubscribeState","subscribeState","SubscribeStdout","subscribeStdout","SubscribeStderr","subscribeStderr","SendStdin","sendStdin","InstallPackages","installPackages","ExecuteCode","executeCode","ExecuteFile","executeFile","StopExecution","stopExecution","CreateDirectory","createDirectory","ReadDirectory","readDirectory","WriteFile","writeFile","ReadFile","readFile","ScanDirectory","scanDirectory","Delete","delete","Exists","exists","packages","res","install","rawContent","wasRunning","Run","arg","parseInt","isNaN","fullpath","path","buffer","enable","undefined","internal_exists","getPath","node","pattern","RegExp","replace","curDir","scanDirectory_recursive","JSON","stringify","jsonReplacer","key","name","from","flags","recursive","lookupPath","folders","files","isDir","mode","childDir","nargs","ncont","encoding","opts","rmdir","unlink","analyzePath"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4]}