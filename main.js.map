{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/guards/auth.guard.ts","./src/app/routes.ts","./src/app/services/api-service/api.commands.ts","./src/app/services/api-service/api.packets.ts","./src/app/services/api-service/api.service.ts","./src/app/services/api-service/api.socket.ts","./src/app/services/connection-manager-service/connection-manager.service.ts","./src/app/services/fs-service/fs.service.test.ts","./src/app/services/fs-service/fs.service.ts","./src/app/services/problem-manager-service/problem-manager.service.ts","./src/app/services/python-compiler-service/pydiode-driver.ts","./src/app/services/python-compiler-service/python-compiler.service.ts","./src/app/services/theme-service/theme.service.ts","./src/app/views/connect-view/connect-view.component.ts","./src/app/views/connect-view/connect-view.component.html","./src/app/views/demo-view/demo-view.ts","./src/app/views/demo-view/demo-view.component.html","./src/app/views/home-view/home-view.component.ts","./src/app/views/home-view/home-view.component.html","./src/app/views/select-problem-view/select-problem-view.component.ts","./src/app/views/select-problem-view/select-problem-view.component.html","./src/app/widgets/code-editor/code-editor-widget/code-editor-widget.component.ts","./src/app/widgets/code-editor/code-editor-widget/code-editor-widget.component.html","./src/app/widgets/code-editor/code-editor.module.ts","./src/app/widgets/code-editor/editor-files-widget/editor-files-widget.component.ts","./src/app/widgets/code-editor/editor-files-widget/editor-files-widget.component.html","./src/app/widgets/code-editor/editor-widget/editor-widget.component.ts","./src/app/widgets/code-editor/editor-widget/editor-widget.component.html","./src/app/widgets/code-editor/file-viewer-widget/file-viewer-widget.component.ts","./src/app/widgets/code-editor/file-viewer-widget/file-viewer-widget.component.html","./src/app/widgets/console/console-widget/console-widget.component.ts","./src/app/widgets/console/console-widget/console-widget.component.html","./src/app/widgets/console/console.module.ts","./src/app/widgets/topbar/topbar-widget/topbar-widget.component.ts","./src/app/widgets/topbar/topbar-widget/topbar-widget.component.html","./src/app/widgets/topbar/topbar.module.ts","./src/environments/environment.ts","./src/main.ts","ignored|/home/runner/work/TALightDesktop/TALightDesktop/node_modules/tar-web|fs"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\n\n}\n","<div class=\"tal-page-container\">\n  <div class=\"tal-page-topbar\">\n    <tal-topbar-widget></tal-topbar-widget>\n  </div>\n  <div class=\"tal-page-content\">\n    <router-outlet></router-outlet>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouterModule } from '@angular/router';\n\nimport { AppComponent } from './app.component';\nimport { routes } from './routes';\nimport { HomeViewComponent } from './views/home-view/home-view.component';\nimport { ConnectViewComponent } from './views/connect-view/connect-view.component';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { InputSwitchModule } from 'primeng/inputswitch';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { FileUploadModule } from 'primeng/fileupload';\nimport { TooltipModule } from 'primeng/tooltip';\nimport { ScrollPanelModule } from 'primeng/scrollpanel';\nimport { SelectButtonModule } from 'primeng/selectbutton';\nimport { SplitterModule } from 'primeng/splitter';\nimport { ConsoleModule } from './widgets/console/console.module';\nimport { MonacoEditorModule } from 'ngx-monaco-editor-v2';\nimport { CodeEditorModule } from './widgets/code-editor/code-editor.module';\nimport { SelectProblemViewComponent } from './views/select-problem-view/select-problem-view.component';\nimport { RadioButtonModule } from 'primeng/radiobutton';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { TopbarModule } from './widgets/topbar/topbar.module';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HomeViewComponent,\n    ConnectViewComponent,\n    SelectProblemViewComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MonacoEditorModule.forRoot(),\n    RouterModule.forRoot(routes),\n    FormsModule,\n    InputTextModule,\n    InputSwitchModule,\n    DropdownModule,\n    FileUploadModule,\n    FormsModule,\n    InputTextModule,\n    TooltipModule,\n    ScrollPanelModule,\n    SelectButtonModule,\n    SplitterModule,\n    RadioButtonModule,\n    ConsoleModule,\n    CodeEditorModule,\n    TopbarModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { ConnectionManagerService } from '../services/connection-manager-service/connection-manager.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n  constructor(\n    private readonly connectionManagerService: ConnectionManagerService,\n    private readonly router: Router,\n  ) { }\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n    const isConnected: boolean = this.connectionManagerService.isConnected;\n\n    if (!isConnected) {\n      //this.router.navigate(['/connect']);\n    }\n    return true;\n    return isConnected;\n  }\n\n}\n","import { Routes } from '@angular/router';\nimport { AuthGuard } from './guards/auth.guard';\nimport { ConnectViewComponent } from './views/connect-view/connect-view.component';\nimport { HomeViewComponent } from './views/home-view/home-view.component';\nimport { SelectProblemViewComponent } from './views/select-problem-view/select-problem-view.component';\nimport { DemoViewComponent } from './views/demo-view/demo-view';\n\nexport const routes: Routes = [\n    /*\n    {\n        path: '',\n        redirectTo: '/home',\n        pathMatch: 'full'\n    },\n    {\n        path: 'home',\n        canActivate: [AuthGuard],\n        component: HomeViewComponent\n    },\n    */\n\n    {\n        path: '',\n        canActivate: [AuthGuard],\n        component: HomeViewComponent\n    },\n\n    /*\n    {\n        path: 'connect',\n        component: ConnectViewComponent\n    },\n\n    {\n        path: 'select-problem',\n        component: SelectProblemViewComponent\n    },\n    */\n    {\n        path: 'demo',\n        component: DemoViewComponent\n    },\n];","import { TALightSocket } from \"./api.socket\";\nimport { Packets } from \"./api.packets\";\n\nexport namespace Commands{\n\n    export class Command{\n      public tal: TALightSocket;\n      public url?:string;\n      public debug=false; \n      public onReciveHandshake?:(message:Packets.Reply.Handshake)=>void;\n      public onReciveBinary?:(message:string)=>void;\n      public onReciveUndecodedBinary?:(message:ArrayBuffer)=>void;\n      public onRecive?:(message:Packets.PacketsPayload)=>void; \n      public onClose?:()=>void;\n      public onError?:(error:any)=>void;\n  \n      constructor(url:string, decodeBinary?:boolean){\n        this.url = url;\n        this.tal = new TALightSocket(this.url);\n        if(decodeBinary === false) {this.tal.decode = decodeBinary;}\n\n        this.tal.onError = (error)=>{ this.didError(error); };\n        this.tal.onClose = ()=>{ this.didClose(); };\n        this.tal.onRecive = (payload)=> { this.didRecive(payload) }\n        this.tal.onReciveBinary = (payload)=> { this.didReciveBinary(payload) }\n        this.tal.onReciveUndecodedBinary = (payload)=> { this.didReciveUndecodedBinary(payload) }\n      }\n      \n      public run(){\n        let msg = new Packets.Request.Handshake();\n        this.tal.send(msg);\n      }\n\n      public sendBinary(data:string){\n        this.log(\"didSendBinary: \"+data);\n        this.tal.sendBinary(data);\n      }\n\n      public log(...args:string[]){\n        let prefix = this.constructor.name+\": \"\n        console.log(prefix, ...args);\n\n        if (this.debug) alert(prefix + (args).join(\" \") );\n      }\n      \n      public didClose(){\n        this.log(\"didClose\");\n        if (this.onClose){ this.onClose();}\n      }\n  \n      public didError(error:any){\n        this.log(\"didError \",error);\n        if (this.onError){ this.onError(error);}\n      }\n\n      public didReciveBinary(payload:string){\n        this.log(\"didReciveBinary:\\n\"+payload);\n        if(this.onReciveBinary){this.onReciveBinary(payload)}\n      }\n\n      public didReciveUndecodedBinary(payload:ArrayBuffer){\n        this.log(\"didReciveUndecodedBinary:\\n\");\n        if(this.onReciveUndecodedBinary){this.onReciveUndecodedBinary(payload)}\n      }\n\n      public didRecive(payload:Packets.PacketsPayload){\n        this.log(\"didRecive\");\n        if(this.onRecive){ this.onRecive(payload) }\n        \n        let message = payload.getMessage(Packets.Reply.Handshake)\n        if (message){ this.didReciveHandshake(message); }\n      }\n\n      \n      public didReciveHandshake(message:Packets.Reply.Handshake){\n        this.log(\"didRecieveHandshake\");\n        if (this.onReciveHandshake) { this.onReciveHandshake(message); }\n      }\n    }\n\n    export class ProblemList extends Command{\n      public onRecieveProblemList?:(message:Packets.Reply.MetaList)=>void\n      \n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n\n        let msg = new Packets.Request.MetaList();\n        this.tal.send(msg);\n      }\n\n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.MetaList);\n        if (message){ this.didReciveProblemList(message); }\n      }\n        \n      public didReciveProblemList(message:Packets.Reply.MetaList){\n        this.log(\"onRecieveProblemList\");\n        if (this.onRecieveProblemList) { this.onRecieveProblemList(message); }\n      }\n    }\n\n    export class Attchment extends Command{\n      public onReciveAttachment?:(message:Packets.Reply.Attachment )=>void;\n      public onReciveAttachmentInfo?:(message:Packets.Reply.AttachmentInfo)=>void;\n\n      private msg:Packets.Request.Attachment;\n  \n      constructor(url:string, problem_name:string){\n        super(url, false);\n  \n        this.msg = new Packets.Request.Attachment(problem_name);\n      }\n  \n      public override didReciveHandshake(handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n  \n        this.tal!.send(this.msg)\n      }\n\n      public override didRecive(payload: Packets.PacketsPayload): void {\n        super.didRecive(payload);\n        let message;\n\n        message = payload.getMessage(Packets.Reply.Attachment)\n        if (message){ this.didRecieveAttachment(message); }\n \n        message = payload.getMessage(Packets.Reply.AttachmentInfo)\n        if (message){ this.didRecieveAttachmentInfo(message);}\n        \n      }\n\n      public didRecieveAttachment(message: Packets.Reply.Attachment){\n        this.log(\"Attachment\");\n        if (this.onReciveAttachment ) { this.onReciveAttachment(message); }\n      }\n      \n      public didRecieveAttachmentInfo(message: Packets.Reply.AttachmentInfo){\n        this.log(\"AttachmentInfo\");\n        if (this.onReciveAttachmentInfo ) { this.onReciveAttachmentInfo(message); }\n      }\n      \n    }  \n    \n    export class Connect extends Command{ \n      public onReciveConnectBegin?:(message:Packets.Reply.ConnectBegin )=>void;\n      public onReciveConnectStart?:(message:Packets.Reply.ConnectStart)=>void;\n      public onReciveConnectStop?:(message:Packets.Reply.ConnectStop)=>void;\n      \n      private msg:Packets.Request.ConnectBegin;\n  \n      constructor(url:string, problem_name:string, service:string, args?:{}, tty?:boolean, token?:string, files?:string[]){\n        super(url);\n        this.msg = new Packets.Request.ConnectBegin(problem_name, service, args, tty, token, files);\n      }\n\n      public override didReciveHandshake(handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n        this.tal.send(this.msg);\n      }\n      \n      public override didRecive(payload: Packets.PacketsPayload): void {\n        super.didRecive(payload);\n        let message;\n        message = payload.getMessage(Packets.Reply.ConnectBegin);\n        if (message){ this.didRecieveConnectBegin(message); }\n\n        message = payload.getMessage(Packets.Reply.ConnectStart)\n        if (message){ this.didRecieveConnectStart(message); }\n\n        message = payload.getMessage(Packets.Reply.ConnectStop)\n        if (message){ this.didRecieveConnectStop(message); }\n      }\n\n      public didRecieveConnectBegin(message: Packets.Reply.ConnectBegin){\n        this.log(\"didRecieveJoin\");\n        if (this.onReciveConnectBegin ) { this.onReciveConnectBegin(message); }\n      }\n\n      public didRecieveConnectStart(message: Packets.Reply.ConnectStart){\n        this.log(\"didRecieveUpdate\");\n        if (this.onReciveConnectStart ) { this.onReciveConnectStart(message); }\n      }\n      \n      public didRecieveConnectStop(message: Packets.Reply.ConnectStop){\n        this.log(\"didRecieveStart\");\n        if (this.onReciveConnectStop ) { if(this.tal.isOpen()) {this.sendConnectStop();} this.tal.closeConnection(); this.onReciveConnectStop(message); }\n      }\n\n      public sendConnectStop() {\n        this.tal.send(new Packets.Request.ConnectStop());\n        //this.tal.closeConnection();\n      }\n    }\n\n    export class CloseConnection extends Command{\n      public onReciveConnectStop?:(message:Packets.Reply.ConnectStop)=>void;\n\n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n\n        let msg = new Packets.Request.ConnectStop();\n        this.tal.send(msg);\n      }\n\n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.ConnectStop);\n        if (message){ this.didReciveConnectStop(message); }\n      }\n        \n      public didReciveConnectStop(message:Packets.Reply.ConnectStop){\n        this.log(\"didRecieveGameList\");\n        if (this.onReciveConnectStop) { this.onReciveConnectStop(message); }\n      }\n    }\n\n    /*\n  \n    export class GameList extends Command{\n      public onRecieveGameList?:(message:Packets.Reply.GameList)=>void\n      \n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n\n        let msg = new Packets.Request.GameList();\n        this.tal.send(msg);\n      }\n\n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.GameList)\n        if (message){ this.didReciveGameList(message); }\n      }\n        \n      public didReciveGameList(message:Packets.Reply.GameList){\n        this.log(\"didRecieveGameList\");\n        if (this.onRecieveGameList) { this.onRecieveGameList(message); }\n      }\n    }\n\n    export class GameDescription extends Command{\n      public onRecieveGameDescription?:(message:Packets.Reply.GameDescription)=>void\n      private msg:Packets.Request.GameDescription;\n  \n      constructor(url:string, game:string){\n        super(url);\n        this.msg = new Packets.Request.GameDescription(game);\n      }\n\n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n\n        let msg = new Packets.Request.GameDescription();\n        this.tal.send(msg);\n      }\n\n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.GameDescription)\n        if (message){ this.didReciveGameDescription(message); }\n      }\n        \n      public didReciveGameDescription(message:Packets.Reply.GameDescription){\n        this.log(\"didRecieveGameList\");\n        if (this.onRecieveGameDescription) { this.onRecieveGameDescription(message); }\n      }\n    }\n  \n    export class LobbyList extends Command{\n      public onReciveLobbyList?:(message:Packets.Reply.LobbyList)=>void;\n      \n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n        \n        let msg = new Packets.Request.LobbyList();\n        this.tal!.send(msg);\n      }\n\n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.LobbyList)\n        if (message){ this.didRecieveLobbyList(message);}\n      }\n        \n      public didRecieveLobbyList(message:Packets.Reply.LobbyList){\n        this.log(\"didRecieveLobbyList\");\n        if (this.onReciveLobbyList) { this.onReciveLobbyList(message); }\n      }\n    }\n  \n    export class NewLobby extends Command {\n      public onReciveNewLobby?:(message:Packets.Reply.GameNew)=>void;\n\n      private msg:Packets.Request.GameNew;\n  \n      constructor(url:string, lobby_name?:string, game_name?:string, num_palyer?:number, num_bots?:number, timeout?:number, args?:{}, password?:string){\n        super(url);\n        this.msg = new Packets.Request.GameNew(lobby_name, game_name, num_palyer, num_bots, timeout, args, password);\n      }\n      \n      public override didRecive(payload:Packets.PacketsPayload){\n        super.didRecive(payload);\n        let message = payload.getMessage(Packets.Reply.GameNew)\n        if (message){\n          this.didRecieveNewLobby(message);\n        }\n      }\n        \n      public didRecieveNewLobby(message:Packets.Reply.GameNew){\n        this.log(\"didRecieveNewLobby\");\n        if (this.onReciveNewLobby) { this.onReciveNewLobby(message); }\n      }\n            \n      public override didReciveHandshake( handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n        this.tal!.send(this.msg);\n      }\n    }\n  \n    export class Connect extends Command{\n      public onReciveJoin?:(message:Packets.Reply.LobbyJoinedMatch )=>void;\n      public onReciveUpdate?:(message:Packets.Reply.LobbyUpdate)=>void;\n      public onReciveStart?:(message:Packets.Reply.MatchStarted)=>void;\n      public onReciveEnd?:(message:Packets.Reply.MatchEnded) => void;\n      \n      private msg:Packets.Request.LobbyJoinMatch;\n  \n      constructor(url:string, lobby_id:string, player_name:string, lobby_password?:string){\n        super(url);\n        this.msg = new Packets.Request.LobbyJoinMatch(lobby_id, player_name, lobby_password);\n      }\n\n      public override didReciveHandshake(handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n        this.tal.send(this.msg);\n      }\n      \n      public override didRecive(payload: Packets.PacketsPayload): void {\n        super.didRecive(payload);\n        let message;\n        message = payload.getMessage(Packets.Reply.LobbyJoinedMatch);\n        if (message){ this.didRecieveJoin(message); }\n\n        message = payload.getMessage(Packets.Reply.LobbyUpdate)\n        if (message){ this.didRecieveUpdate(message); }\n\n        message = payload.getMessage(Packets.Reply.MatchStarted)\n        if (message){ this.didRecieveStart(message); }\n        \n        message = payload.getMessage(Packets.Reply.MatchEnded)\n        if (message){ this.didRecieveEnd(message); }\n      }\n\n      public didRecieveJoin(message: Packets.Reply.LobbyJoinedMatch){\n        this.log(\"didRecieveJoin\");\n        if (this.onReciveJoin ) { this.onReciveJoin(message); }\n      }\n\n      public didRecieveUpdate(message: Packets.Reply.LobbyUpdate){\n        this.log(\"didRecieveUpdate\");\n        if (this.onReciveUpdate ) { this.onReciveUpdate(message); }\n      }\n      \n      public didRecieveStart(message: Packets.Reply.MatchStarted){\n        this.log(\"didRecieveStart\");\n        if (this.onReciveStart ) { this.onReciveStart(message); }\n      }\n      \n      public didRecieveEnd(message: Packets.Reply.MatchEnded){\n        this.log(\"didRecieveEnd\");\n        this.tal.closeConnection();\n        if (this.onReciveEnd ) { this.onReciveEnd(message); }\n      }\n    }\n\n    export class Spectate extends Command{\n      public onReciveJoin?:(message:Packets.Reply.SpectateJoined )=>void;\n      public onReciveUpdate?:(message:Packets.Reply.LobbyUpdate)=>void;\n      public onReciveStart?:(message:Packets.Reply.SpectateStarted)=>void;\n      public onReciveSync?:(message:Packets.Reply.SpectateSynced) => void;\n      public onReciveEnd?:(message:Packets.Reply.SpectateEnded) => void;\n\n      private msg:Packets.Request.SpectateJoin;\n  \n      constructor(url:string, lobby_id:string){\n        super(url);\n  \n        this.msg = new Packets.Request.SpectateJoin(lobby_id);\n      }\n  \n      public override didReciveHandshake(handshake: Packets.Reply.Handshake){\n        super.didReciveHandshake(handshake);\n  \n        this.tal!.send(this.msg)\n      }\n\n      public override didRecive(payload: Packets.PacketsPayload): void {\n        super.didRecive(payload);\n        let message;\n\n        message = payload.getMessage(Packets.Reply.SpectateJoined)\n        if (message){ this.didRecieveJoin(message); }\n\n        message = payload.getMessage(Packets.Reply.LobbyUpdate)\n        if (message){ this.didRecieveUpdate(message);}\n        \n        message = payload.getMessage(Packets.Reply.SpectateStarted)\n        if (message){ this.didRecieveStart(message);}\n\n        message = payload.getMessage(Packets.Reply.SpectateSynced)\n        if (message){ this.didRecieveStart(message);}\n\n        message = payload.getMessage(Packets.Reply.SpectateEnded)\n        if (message){ this.didRecieveEnd(message);}\n\n      }\n\n      public didRecieveJoin(message: Packets.Reply.LobbyJoinedMatch){\n        this.log(\"LobbyJoinedMatch\");\n        if (this.onReciveJoin ) { this.onReciveJoin(message); }\n      }\n\n      public didRecieveUpdate(message: Packets.Reply.LobbyUpdate){\n        this.log(\"LobbyUpdate\");\n        if (this.onReciveUpdate ) { this.onReciveUpdate(message); }\n      }\n      \n      public didRecieveStart(message: Packets.Reply.MatchStarted){\n        this.log(\"MatchStarted\");\n        if (this.onReciveStart ) { this.onReciveStart(message); }\n      }\n      \n      public didRecieveEnd(message: Packets.Reply.MatchEnded){\n        this.log(\"MatchEnded\");\n        this.tal.closeConnection();\n        if (this.onReciveEnd ) { this.onReciveEnd(message); }\n      }\n    }\n    */\n  }","\nexport namespace Packets{\n\n    export class PacketsPayload{\n      public data;\n      public packets:any;\n      public packetTypes:string[] = []\n\n      constructor(data:string){\n        this.data = data;\n        this.packets = JSON.parse(this.data);\n        for (var pkttype in this.packets) {\n          this.packetTypes.push(pkttype)\n        }\n\n        if(this.packetTypes.length === 3 &&\n          this.packetTypes.indexOf(\"name\") === 0 &&\n          this.packetTypes.indexOf(\"size\") === 1 &&\n          this.packetTypes.indexOf(\"hash\") === 2\n          ) {\n            this.packetTypes = [\"AttachmentInfo\"];\n            this.packets = {\"AttachmentInfo\" : this.packets};\n        }\n      }\n\n      public getMessage<T extends Message>( packetClass: new (packet?: any)=>T ):T | null{\n        let packetType = packetClass.name;\n        for (var pkttype in this.packets) {\n          if (pkttype != packetType){ continue; }\n          let packet = this.packets[packetType] \n          let message = new packetClass(packet);\n          return message;\n        }        \n        return null;\n      }\n\n    }\n  \n    export class Message{\n      constructor(packet?: any){\n        if(packet){this.fromPacket(packet);}\n      }\n\n      public static dataToPayload(data: string): PacketsPayload{\n        let raw = JSON.parse(data);\n        return raw;\n      }\n      \n      public static findPacketName(msgClasses: Array<string>, packet: any): string{\n        var msgClass = \"\";\n        msgClasses.forEach((msgName) => {\n          if(msgName in JSON.parse(packet)){\n            msgClass = msgName;\n          }\n        });\n  \n        return msgClass;\n      }\n\n\n\n      public messageName():string{\n        return this.constructor.name;\n      }\n  \n      public toPacketWithName(messageName: string){\n        const packet = { [messageName]:this };\n        return packet;\n      }\n\n      public toPacket(): any{\n        const packetName = this.messageName();\n        const packet = { [packetName]:this };\n        return packet;\n      }\n      \n      public fromPacket(packet:any){\n        for (var msgField in this) {\n          if (! (msgField in packet)){ continue; }\n          let value = packet[msgField];\n          const varType = typeof value;\n          \n          if (varType in [\"function\",\"undefined\",\"symbol\"] ){ continue; }\n  \n          if (varType === \"object\") {\n            this[msgField] = Object.assign(value);\n          } else {\n            this[msgField] = value;\n          }\n        }\n        return true;\n      }\n    }\n  \n  export class Meta {\n    constructor(data?: any){\n      //console.log(\"Meta:constructor:\", data)\n      this.public_folder = data.public_folder\n      let servicesMap = new Map<string,Service>()\n      for(var attr in data.services){\n        let value = data.services[attr];\n        //console.log(\"Meta:constructor:services:\",attr,value)\n        let service = new Service(value);\n        servicesMap.set(attr,service)\n      }\n      this.services = servicesMap\n    }\n    public public_folder: string = \"\";\n    public services: Map<string, Service> = new Map<string, Service>();\n  }\n\n  export class Service {\n    constructor(data?: any){\n      //console.log(\"Service:constructor:\", data)\n      this.evaluator = data.evaluator\n      this.files = data.files\n      let argsMap = new Map<string,Arg>()\n      for(var attr in data.args){\n        let value = data.args[attr];\n        let arg = new Arg(value);\n        argsMap.set(attr,arg)\n      }\n      this.args = argsMap\n    }\n    public evaluator: string[] = [];\n    public args?:Map<string, Arg>;\n    public files?: string[];\n  }\n\n  export class Arg {\n    constructor(data: any){\n      this.regex = data.regex\n      this.default = data.default\n    }\n    public regex: RegExp;\n    public default: string;\n  }\n\n\n\n    \n  // Requests ---------------------------------\n  export namespace Request{\n    export class Message extends Packets.Message {}\n    export class Handshake extends Message {\n      public magic:string = \"rtal\";\n      public version:number = 2;\n    }\n    export class MetaList extends Message {}\n    export class  Attachment extends Message{\n      public problem: String;\n\n      constructor(problem_name:String) {\n        super();\n        this.problem = problem_name;\n      }\n    }\n    export class ConnectBegin extends Message {\n      public problem:string = \"\";\n      public service:string = \"\";\n      public args:{} = {};\n      public tty:boolean = false;\n      public token:string|null = null;\n      public files:string[] = [];\n\n      constructor(problem:string, service:string, args:{}={}, tty:boolean=false, token:string|null = null, files:string[] = []) {\n        super();\n        this.problem = problem;\n        this.service = service;\n        this.args = args;\n        this.tty = tty;\n        this.token = token;\n        this.files = files;\n      }\n    }\n    export class ConnectStop extends Message {}\n  }\n\n\n  export namespace Reply{\n    export class Message extends Packets.Message {}\n    export class Handshake extends Message {\n      public magic:string = \"\";\n      public version:number = 2;\n    }\n    export class MetaList extends Message {\n      constructor(packet?: any){\n        super(packet)\n        let metaMap = new Map<string,Meta>()\n        for(var attr in packet.meta){\n          let value = packet.meta[attr];\n          let meta = new Meta(value);\n          metaMap.set(attr,meta)\n        }\n        this.meta = metaMap\n      }\n      public meta:Map<string, Meta> = new Map<string, Meta>();\n    }\n    export class  Attachment extends Message{\n      public status = {\"Ok\": undefined, \"Err\": \"\"};\n    }\n    export class AttachmentInfo extends Message {\n      public name:string = \"\";\n      public size:string = \"\";\n      public hash:string = \"\";\n    }\n    export class ConnectBegin extends Message {\n      public status = {\"Ok\": [\"\"], \"Err\": \"\"};\n    }\n    export class ConnectStart extends Message {\n      public status = {\"Ok\": undefined, \"Err\": \"\"};\n    }\n    export class ConnectStop extends Message {\n      public status = {\"Ok\": [\"\"], \"Err\": \"\"};\n    }\n\n    /*\n    Attachment { status: Result<(), String> },\n    ConnectBegin { status: Result<Vec<String>, String> },\n    ConnectStart { status: Result<(), String> },\n    ConnectStop { status: Result<Vec<String>, String> }\n    */\n  }\n}\n\n\n","import { Injectable } from '@angular/core';\nimport { Packets } from './api.packets';\nimport { Commands } from './api.commands';\n\nexport class Meta extends Packets.Meta{}\nexport interface AttachmentInfo extends Packets.Reply.AttachmentInfo{}\n\n\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n  private _url;\n  urlCache;\n\n  constructor(){\n    this._url = 'wss://ta.di.univr.it/sfide'\n    this.urlCache = [\n      this._url,\n      'ws://localhost:8008/',\n      'wss://ta.di.univr.it/rtal',\n    ]\n  }\n\n  public get url(): string {\n    return this._url;\n  }\n\n  public addToCache(url:string){\n    this.removeFromCache(url)\n    this.urlCache.unshift(url)\n  }\n\n  public removeFromCache(url:string){\n    let idx = this.urlCache.indexOf(url)\n    if(idx != -1){\n      this.urlCache.splice(idx,1)\n      return true\n    }\n    return false\n  }\n\n  public setUrl(value: string): boolean {\n    let url;\n    console.log(\"setUrl\")\n    try{ url = new URL(value); }catch(_){ return false; }\n    if(!( url.protocol == 'ws:' || url.protocol == 'wss:' )){ return false; }\n    console.log(\"setUrl:valid!\")\n    this.resetAllConnections()\n    this._url = url.toString();\n    this.addToCache(this._url)\n    return true;\n  }\n\n  public resetAllConnections(){\n    //TODO: is it necessary to kill all old connection upon URL change ? \n  }\n\n  public problemList(onResult:(problemList:Map<string, Meta>)=>void){\n    \n    let cmdList = new Commands.ProblemList(this._url);\n    cmdList.onRecieveProblemList = (message)=>{\n      console.log(\"onRecieveProblemList:\",message)\n      if(onResult){onResult(message.meta)}\n    }\n    cmdList.run();\n    return cmdList;\n  }\n\n  public GetAttachment( \n    problemName:string, \n    onAttachment?: ()=>void,\n    onAttachmentInfo?: (message: Packets.Reply.AttachmentInfo)=>void, \n    onData?: (data: ArrayBuffer)=>void,\n    onError?: (error: string)=>void\n  ){\n    let cmdGet = new Commands.Attchment(this._url, problemName);\n\n    cmdGet.onReciveAttachment = (message) => { \n      if (message.status.Err){ \n        if (cmdGet.onError) { cmdGet.onError(\"Failed to receive attachment: \"+message.status.Ok) } \n        return;\n      }\n      if(onAttachment) { onAttachment() } \n    }\n    cmdGet.onReciveAttachmentInfo = (message) => { if(onAttachmentInfo) { onAttachmentInfo(message) } }\n    cmdGet.onReciveUndecodedBinary = (message) => { if(onData) { onData( message )} }\n    cmdGet.onError = (error) => { if(onError) {onError(error)} }\n\n    cmdGet.run();\n    return cmdGet;\n  }\n\n  public Connect (\n    problem_name:string, \n    service:string, \n    args?:{}, \n    tty?:boolean, \n    token?:string, \n    files?:string[],\n    onConnectBegin?:(message:string[] )=>void,\n    onConnectStart?:()=>void,\n    onConnectStop?:(message:string[])=>void,\n    onData?: (data:string)=>void,\n    onError?:(data:string)=>void\n  ){\n\n    let cmdConnect = new Commands.Connect(this._url, problem_name, service, args, tty, token, files);\n\n    cmdConnect.onReciveConnectBegin = (message) => { \n      if (message.status.Err){ \n        if (cmdConnect.onError) { cmdConnect.onError(\"Failed to begin connection: \"+message.status.Err); } \n        return;\n      }\n      if(onConnectBegin && message.status.Ok) { onConnectBegin(message.status.Ok) }\n    }\n\n    cmdConnect.onReciveConnectStart = (message) => { \n      if (message.status.Err){ \n        if (cmdConnect.onError) { cmdConnect.onError(\"Failed to start connect: \"+message.status.Err)  } \n        return;\n      }\n      if(onConnectStart) { onConnectStart() }\n    }\n\n    cmdConnect.onReciveConnectStop = (message) => { \n      if (message.status.Err){ \n        if (cmdConnect.onError) { cmdConnect.onError(\"Failed to stop connection: \"+message.status.Err)  } \n        return;\n      }\n      if(onConnectStop && message.status.Ok) { onConnectStop(message.status.Ok) }\n    }\n    \n    cmdConnect.onReciveBinary = (message) => { if(onData) { onData(message)} }\n    cmdConnect.onError = (error) => { if(onError) {onError(error)} }\n    \n    cmdConnect.run();\n    return cmdConnect;\n  }\n\n  /*\n\n  public connectToPlay( \n      lobbyID:string, \n      displayName:string, \n      password?:string,\n      onEvent?: (state:LobbyEventType)=>void,\n      onMatchUpdate?: (matchInfo: MatchInfo)=>void, \n      onData?: (data:string)=>void,\n      onError?:(data:string)=>void\n    ){\n    \n    let cmdConnect = new Commands.Connect(this.url, lobbyID, displayName, password);\n    cmdConnect.onReciveJoin = (message) => { \n      console.log(message.info.Err)\n      if (message.info.Err){ \n        if (cmdConnect.onError) { cmdConnect.onError(\"Failed to join lobby: \"+message.info.Err)  } \n        return;\n      }\n      if(onEvent) { onEvent(LobbyEventType.Join) } \n      if(onMatchUpdate && message.info.Ok) { onMatchUpdate(message.info.Ok) }\n    }\n    cmdConnect.onReciveStart = (message) => { if(onEvent) { onEvent(LobbyEventType.Start) } }\n    cmdConnect.onReciveEnd = (message) => { if(onEvent) { onEvent(LobbyEventType.End) } }\n    cmdConnect.onReciveUpdate = (message) => { if(onMatchUpdate ) { onMatchUpdate(message.info) } }\n    cmdConnect.onReciveBinary = (message) => { if(onData) { onData(message)} }\n    cmdConnect.onError = onError\n    \n    cmdConnect.run();\n    return cmdConnect;\n  }\n\n  public connectToSpectate( \n      lobbyID:string, \n      onEvent?: (state:LobbyEventType)=>void,\n      onMatchUpdate?: (matchInfo: MatchInfo)=>void, \n      onData?: (data:string)=>void,\n    ){\n    \n    let cmdSpectate = new Commands.Spectate(this.url, lobbyID);\n\n    cmdSpectate.onReciveJoin = (message) => { \n      if (message.info.Err){ \n        if (cmdSpectate.onError) { cmdSpectate.onError(\"Failed to join lobby: \"+message.info.Err)  } \n        return;\n      }\n      if(onEvent) { onEvent(LobbyEventType.Join) } \n      if(onMatchUpdate && message.info.Ok) { onMatchUpdate(message.info.Ok) }\n    }\n    cmdSpectate.onReciveStart = () => { if(onEvent) { onEvent(LobbyEventType.Start) } }\n    cmdSpectate.onReciveEnd = () => { if(onEvent) { onEvent(LobbyEventType.End) } }\n    cmdSpectate.onReciveSync = () => { if(onEvent) { onEvent(LobbyEventType.Sync) } }\n    cmdSpectate.onReciveUpdate = (message) => { if(onMatchUpdate) { onMatchUpdate(message.info) } }\n    cmdSpectate.onReciveBinary = (message) => { if(onData) { onData( message )} }\n    \n    cmdSpectate.run();\n    return cmdSpectate;\n  }\n\n  */\n \n}\n","import { WebSocketSubject } from 'rxjs/webSocket';\nimport { Packets } from './api.packets';\n\n\nexport class TALightSocket{\n  public url = 'ws://localhost:8008';\n  public ws?:WebSocketSubject<any>;\n  \n  public decode = true;\n  public binEncoder = new TextEncoder(); // always utf-8\n  public binDecoder = new TextDecoder(\"utf-8\");\n  \n  public onError?:(error:string)=>void;\n  public onClose?:()=>void;\n  public onRecive?:(payload: Packets.PacketsPayload) => void;\n  public onReciveBinary?:(payload: string) => void;\n  public onReciveUndecodedBinary?:(payload: ArrayBuffer) => void;\n      \n  constructor(url:string){\n    this.url = url;\n\n    if (!this.ws || this.ws.closed ){\n      this.ws = new WebSocketSubject({\n        url: this.url,\n        binaryType: \"arraybuffer\",\n        deserializer: msg => msg,\n        serializer: msg => {\n          if (msg instanceof ArrayBuffer)\n            return msg;\n          else\n            return JSON.stringify(msg);\n        }\n      });\n      this.ws.subscribe({\n        next: (payload:any)=>{ this.didRecieve(payload) },\n        error: (error:any)=>{ this.didError(error) },\n        complete: ()=>{ this.didClose() },\n      });\n\n      console.log(\"Created new socket\");\n    }\n  }\n\n  public isOpen():boolean{\n    return (!!this.ws) && !this.ws.closed;\n  }\n\n  public closeConnection(){\n    this.ws!.unsubscribe();\n    this.ws!.complete();\n    console.log(\"TALightSocket:closeConnection\");\n  }\n  \n  public send(request: Packets.Request.Message){\n    if (!this.isOpen()) {\n      this.didError(\"TALightSocket:send: unable to send, socket is null\")\n      return false\n    } \n    \n    let packet = request.toPacket();\n    this.ws!.next(packet);\n\n    return true;\n  }\n\n  public sendBinary(data: string) {\n    let payload = this.binEncoder.encode(data);\n    if (!this.isOpen()) {\n      this.didError(\"TALightSocket:sendBinary: unable to send, socket is null\")\n      return false\n    } \n    console.log(\"TALightSocket:sendBinary: sending payload \\n\"+payload);\n    this.ws!.next(payload.buffer);\n    return true;\n  }\n  \n  public didRecieve(payload:MessageEvent){ // Called whenever there is a message from the server.\n    let data = payload.data;\n    console.log(\"TALightSocket:didRecieve:type: \"+payload.constructor.name+\"<\"+payload.data.constructor.name+\">\" )\n\n    if(typeof data === \"object\" && data instanceof ArrayBuffer) {\n      if(this.decode) {\n        if (data.byteLength == 0) {return}\n        data = this.binDecoder.decode(data);\n        console.log(\"TALightSocket:didRecieve:binary:\\n\"+data)\n        if(this.onReciveBinary){ this.onReciveBinary( data );}\n      } \n      else {\n        if(this.onReciveUndecodedBinary){ this.onReciveUndecodedBinary( data );}\n      }\n    } else{\n      let packetsPayload = new Packets.PacketsPayload(data)\n      console.log(\"TALightSocket:didRecieve:packets: \"+packetsPayload.packetTypes)\n      if(this.onRecive){ this.onRecive( packetsPayload ); }\n      \n    }\n  }\n\n  public didError(error:any) { \n    //let errorMsg = JSON.stringify(err);\n    if (this.onError) { this.onError(error );}\n  }\n\n  public didClose() { \n    this.closeConnection();\n    if (this.onClose) { this.onClose();}\n  }\n}\n\n\n\n\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../api-service/api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConnectionManagerService {\n  private _url: string = \"\";\n  private _isConnected: boolean = false;\n\n  constructor( private readonly router: Router, private api:ApiService ) { }\n\n  public get isConnected(): boolean {\n    return this._isConnected;\n  }\n\n  public get url(): string {\n    return this._url;\n  }\n\n  public set url(value: string) {\n    if(this.api.setUrl(value)){\n      this._url = value;\n    }\n  }\n\n  /*\n  public async connect(url: string): Promise<boolean> {\n    this._url = url;\n    \n    // TODO: connect to server\n    // Add the below lines to the connect method\n    // this.isConnected = true;\n    // this.router.navigate(['/home']);\n\n    // TO REMOVE: Temporary return true\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this._isConnected = true;\n        this.router.navigate(['/home']);\n        resolve(true);\n      }, 2000);\n    });\n  }\n  */\n\n  public disconnect(): void {\n    this._isConnected = false;\n    this.router.navigate(['/home']);\n  }\n\n}\n","import { createFs } from 'indexeddb-fs';\nimport { FsNodeFile, FsNodeFolder, FsService, FsServiceDriver } from './fs.service';\n\n\nexport class IndexeddbFsDriver implements FsServiceDriver {\n  public fs;\n  public rootDir = \"root\"\n  public options = {\n    databaseVersion:    1,\n    objectStoreName:    'files',\n    databaseName:       'indexeddb',\n    rootDirectoryName:  this.rootDir\n  }\n\n  constructor() { \n    this.fs = createFs(this.options);\n  }\n\n  async ready(): Promise<boolean>{\n    return true;\n  }\n\n  async readFile(fullpath:string, binary: boolean): Promise<string|null>{\n    if (!(await this.fs.exists(fullpath)) ) {return null;}\n    return this.fs.readFile(fullpath);\n  }\n\n  async createDirectory(fullpath:string): Promise<boolean>{\n    let res = await this.fs.createDirectory(fullpath);\n    return await this.fs.exists(fullpath);\n  }\n\n  async writeFile(fullpath:string, content:string): Promise<number>{\n    let res = await this.fs.writeFile(fullpath, content);\n    if (!(await this.fs.exists(fullpath)) ) {return -1;}\n    return res.data.length;\n  }\n\n  async readDirectory(fullpath:string):Promise<FsNodeFolder|null>{\n    if ( await this.fs.exists(fullpath) ) {\n      return this.scanDirectory_recursive(fullpath);\n    }\n    return null;\n  }\n\n  \n  async scanDirectory(path?:string):Promise<FsNodeFolder>{\n    if (!path){path = this.rootDir;}\n    return this.scanDirectory_recursive(path, true)\n  }\n\n  async scanDirectory_recursive(path:string, recursive=false):Promise<FsNodeFolder>{\n    let rootNode:FsNodeFolder = {\n      name: path.split(\"/\").reverse()[0]+\"/\",\n      path: path,\n      folders: [],\n      files: []\n    };\n    console.log(\"scanDirectory:dir: \",path);\n    \n    let dirContent = await this.fs.readDirectory(path)\n     \n\n    for(let key in dirContent.files){\n      let element = dirContent.files[key]\n      let childNode:FsNodeFile = {\n        name: element.name,\n        path: element.fullPath,\n        content: \"\"\n        //depth: depth + 1,\n      }\n      rootNode.files.push(childNode);\n      console.log(\"scanDirectory:file: \",element.fullPath);\n    }\n\n    for(let key in dirContent.directories){\n      let element = dirContent.directories[key]\n      if (recursive){\n        rootNode.folders.push(await this.scanDirectory_recursive(element.fullPath, true));\n      }\n      else{\n        let childNode:FsNodeFolder = {\n          name: element.name,\n          path: element.fullPath,\n          //depth: depth + 1,\n          folders: [],\n          files: []\n        }\n        rootNode.folders.push(childNode);\n      }\n    }\n\n    return rootNode;\n  }\n\n  async delete(fullpath:string): Promise<boolean>{\n    if(!this.exists(fullpath)) return true;\n    await this.fs.remove(fullpath);\n    return !this.exists(fullpath);\n  }\n\n  async exists(fullpath:string): Promise<boolean>{\n    return this.fs.exists(fullpath);\n  }\n\n}\n\n\nexport class FsServiceTest{\n  \n  public fs;\n  public driver;\n  public driverName;\n  constructor( fs:FsService, useDriver?:string ){\n    this.fs = fs;\n     \n    this.driverName = useDriver ?? 'example';\n    this.driver = fs.getDriver(this.driverName);\n    //alert('driverName:'+this.driver)\n  }\n  \n  \n\n  async createTestFiles(){\n    \n    if (!this.driver){return;}\n    //alert('createTestFiles: before: '+this.driver.constructor.name);\n    await this.driver.createDirectory('/src');\n    await this.driver.createDirectory('/assets');\n    await this.driver.createDirectory('/assets/data');\n    await this.driver.createDirectory('/assets/img');\n    await this.driver.writeFile('/main.py',           'import src/testclass.py\\nprint(\"hello\");');\n    await this.driver.writeFile('/mainC.py',           'import src/testclass.py\\nprint(\"helloC\");');\n    await this.driver.writeFile('/src/__init__.py',   '');\n    await this.driver.writeFile('/src/testclassA.py',  'class testclassA: pass');\n    await this.driver.writeFile('/src/testclassB.py',  'class testclassB: pass');\n    await this.driver.writeFile('/src/testclassC.py',  'class testclassC: pass');\n  }\n\n}\n\n\n","import { Injectable } from '@angular/core';\nimport { IndexeddbFsDriver } from './fs.service.test';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FsService {\n  public drivers = new Map<string,FsServiceDriver>();\n  \n  constructor(){\n     //TODO: Remove test driver FS from constructor\n    this.registerDriver('example', new IndexeddbFsDriver());   \n  }\n\n  registerDriver(name:string, driver: FsServiceDriver):boolean{\n    //if (name in this.drivers){return false;}\n    //alert('register: '+driver)\n    this.drivers.set(name, driver);\n    //alert('register: '+driver.constructor.name+' | all: '+this.getDriverNames())\n    return true;\n  }\n\n  getDriver(name:string): FsServiceDriver | undefined{\n    //alert(name + ' '  + this.getDriverNames() )\n    if ( this.drivers.has(name) ){return this.drivers.get(name);}\n    alert(name + ' NOT found in: '  + this.getDriverNames() + \" | getDriver: undefined !!!\" )\n    return undefined\n    \n  }\n\n  getDriverNames(){\n    return Array.from(this.drivers.keys());\n  }\n\n  treeToList(root:FsNodeFolder){\n    let items = new Array<FsNodeFile|FsNodeFolder>();\n    let queue = new Array<FsNodeFolder>();\n    \n    queue.push(root)\n    console.log('treeToList:root',root)\n    console.log('treeToList:queue:0:',queue.length)\n    while(queue.length > 0){\n      let dir = queue.shift()\n      console.log('treeToList:dir:',dir)\n      if(!dir){break;}\n      items = items.concat(dir.files, dir.folders)\n      queue = queue.concat(dir.folders)\n      console.log('treeToList:queue:',queue.length)\n    }\n    return items;\n  }\n}\n\n\nexport class Tar{\n  public static tarstream = require('tar-web')\n  public static b4a = require('b4a')\n\n  public static binEncoder = new TextEncoder(); // always utf-8\n  public static binDecoder = new TextDecoder(\"utf-8\");\n\n  static unpack(tarball: ArrayBuffer, cb: (files:FsNodeFile[],folders:FsNodeFolder[])=>void ){\n    var extract = this.tarstream.extract()\n\n    var files = new Array<FsNodeFile>();\n    var folders = new Array<FsNodeFolder>();\n    \n    \n    extract.on('entry', function(header:any, stream:any, next:()=>void) {\n      // header is the tar header\n      // stream is the content body (might be an empty stream)\n      // call next when you are done with this entry\n\n      console.log('Tar:unpack:entry:header',header)\n      console.log('Tar:unpack:entry:stream',stream)\n\n      let fullpath = header.name;\n      let filetype = header.type;\n        \n      if ( filetype == 'file' ){\n        stream.on('data', (data:any)=>{\n          console.log('Tar:unpack:entry:data',data)\n          let filename = fullpath.split(\"/\").slice(0,-1)[0];\n          let file:FsNodeFile = {path:fullpath, name:filename, content: data}\n          console.log('Tar:unpack:entry:file',file, stream.read)\n          files.push(file)\n        })\n      }else if ( filetype == 'directory' ){\n        let dirname = fullpath;\n        if( dirname.slice(-1) == '/' ) {dirname = dirname.slice(0,-1)}\n        let forder:FsNodeFolder = {path:fullpath, name:dirname, files:[], folders:[] }\n        console.log('Tar:unpack:entry:forder',forder)\n        folders.push(forder)\n      }\n      \n      // ready for next entry\n      stream.on('end', () => {\n        console.log('Tar:unpack:entry:end'); \n        next()\n      })\n\n      stream.resume() // just auto drain the stream\n    })\n\n    extract.on('finish', function() {\n      console.log('Tar:unpack:finish')\n      console.log('Tar:unpack:files',files)\n      console.log('Tar:unpack:folders',folders)\n      files.sort((a,b)=>a.path.length - b.path.length)\n      folders.sort((a,b)=>a.path.length - b.path.length)\n      // all entries read\n      if(cb){cb(files,folders)}\n    })\n\n    console.log('Tar:unpack:tarball',tarball)\n    console.log('Tar:unpack:extract',extract)\n\n    let tarData = new Uint8Array(tarball)\n    extract.write(tarData, (errr:any)=>{console.log(\"Tar:unpack:extract:write:\",errr)})\n    extract.end()\n    \n    \n  }\n\n  static pack(items: Array<FsNodeFile|FsNodeFolder>, cb:(tarbell:ArrayBuffer)=>void){\n    let pack = this.tarstream.pack() // pack is a stream\n    console.log(pack);\n\n    var length = 0\n    var chunks = new Array<any>();\n    pack.on('data', (chunk:ArrayBuffer)=>{\n      console.log('data:chunk:prototype:',chunk.constructor.name)\n      console.log('data:chunk:',chunk)\n      length += chunk.byteLength\n      chunks.push(chunk)\n    })\n\n    pack.on('end', ()=>{\n      // Create a new array with total length and merge all source arrays.\n      console.log(chunks)\n      let data = new Uint8Array(length);\n      let offset = 0;\n      chunks.forEach(item => {\n        data.set(item, offset);\n        offset += item.length;\n      });\n      console.log(data)\n      if(cb){cb(data)}\n    })\n\n    let processItems = function(items: Array<FsNodeFile|FsNodeFolder>){\n      let item = items.shift()\n      let file = item as FsNodeFile;\n      console.log(\"Tar:pack:item\", item)\n      \n      let content;\n      let header;\n      if( file.content ){\n        console.log(\"Tar:pack:file\", file)\n        if ( file.content instanceof ArrayBuffer ){\n          content = new Uint8Array(file.content)\n        }else{\n          content = file.content\n        }\n        header = {name: file.path}\n      } else {\n        header = {name: item!.path, type:\"directory\"}\n      }\n      \n      pack.entry(header, content, (error:any) => {\n        console.log(\"Tar:pack:onFinishEntry\", error)\n        if (error) { throw error }\n        if ( items.length == 0 ){\n          pack.finalize()\n        }else{\n          processItems(items)\n        }\n      })\n\n    }\n\n    console.log(\"Tar:pack:processItems\", items)\n    processItems(items)\n  }\n\n  \n  \n\n}\n\nexport interface FsNode {\n  name: string;\n  path: string;\n}\n\nexport interface FsNodeFolder extends FsNode {\n  folders: FsNodeFolder[];\n  files: FsNodeFile[];\n}\nexport interface FsNodeFile extends FsNode {\n  content:string|ArrayBuffer\n}\n\n\n\n\n\nexport interface FsServiceDriver {\n  rootDir:string;\n  \n  ready(): Promise<boolean>;\n\n  createDirectory(fullpath:string): Promise<boolean>;\n\n  writeFile(fullpath:string, content:string|ArrayBuffer): Promise<number>;\n\n  readFile(fullpath:string, binary: boolean): Promise<string|ArrayBuffer|null>;\n\n  readDirectory(fullpath:string): Promise<FsNodeFolder|null>;\n\n  scanDirectory(fullpath:string): Promise<FsNodeFolder|null>;\n\n  delete(fullpath:string): Promise<boolean>;\n\n  exists(fullpath:string): Promise<boolean>;\n}\n","import { Injectable } from '@angular/core';\nimport { Packets } from '../api-service/api.packets';\nimport { Meta } from '../api-service/api.service';\n\n\nexport class RawMap extends Map<string, Meta>{};\nexport class ProblemList extends Array<ProblemDescriptor>{};\nexport class ProblemMap extends Map<string, ProblemDescriptor>{};\nexport class ServiceMap extends Map<string, ServiceDescriptor>{};\nexport class ParamsMap extends ServiceMap{};\nexport class ArgsMap extends Map<string, ArgDescriptor>{};\n\nexport class ProblemDescriptor {\n  public key;\n  public services=new ServiceMap();\n  \n  constructor(\n    public name:string, \n    meta:Meta,\n    ){\n      meta.services.forEach((service,serviceName)=>{\n        let serviceDesc = new ServiceDescriptor(serviceName,service,this)\n        this.services.set(serviceDesc.getKey(), serviceDesc)\n      })\n      this.key = this.getKey()\n    }\n\n    getKey(){\n      let key = this.name.trim()\n      key = key.toLowerCase()\n      key = key.replace(\"_+\",\"_\")\n      key = key.replace(\" \",\"-\")\n      key = key.replace(\"-+\",\"-\")\n      key = key.replace(\"[^a-z0-9_-]\",\"\")\n      \n      return key\n    }\n}\n\nexport class ServiceDescriptor {\n  public key;\n  public args = new ArgsMap();\n  public evaluator;\n  public files;\n  constructor( public name:string, \n               service:Packets.Service,\n               public parent:ProblemDescriptor,\n    ){\n      this.evaluator = service.evaluator\n      this.files = service.files\n      service.args!.forEach((arg,argName)=>{\n        //console.log('ServiceDescriptor:constructor:arg', arg)\n        let argDesc = new ArgDescriptor(argName,arg,this)\n        this.args.set(argName,argDesc)\n      })\n      console.log('ServiceDescriptor:constructor:args', this.args)\n      this.key = this.getKey()\n    }\n\n    getKey(){\n      let key = this.name.trim()\n      key = key.toLowerCase().trim()\n      key = key.replace(\" \",\"-\")\n      key = key.replace(\"[^a-z0-9_-]\",\"\")\n      key = key.replace(\"-+\",\"-\")\n      key = key.replace(\"_+\",\"_\")\n      return this.parent.getKey() + \"_\" + key\n    }\n}\n\nexport class ArgDescriptor{\n  public key;\n  public default: string\n  public regex: RegExp\n  public value: string\n  \n  constructor(\n    public name:string, \n    arg: Packets.Arg,\n    public parent: ServiceDescriptor\n    ){\n    this.default = arg.default\n    this.regex = arg.regex\n    this.value = arg.default\n    this.key = this.getKey()\n  }\n\n  getKey(){\n    let key = this.name.trim()\n    key = key.toLowerCase().trim()\n    key = key.replace(\" \",\"-\")\n    key = key.replace(\"[^a-z0-9_-]\",\"\")\n    key = key.replace(\"-+\",\"-\")\n    key = key.replace(\"_+\",\"_\")\n    return this.parent.getKey() + \"_\" + key\n  }\n}\n\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProblemManagerService {\n  selectedProblem?: ProblemDescriptor\n  selectedService?: ServiceDescriptor\n\n  problemList=new ProblemList();\n  problems=new ProblemMap();\n  services=new ServiceMap();\n  savedParams=new ParamsMap();\n  \n  updateProblems(problemMap: RawMap){\n    this.problemList=[];\n    this.problems.clear();\n    problemMap.forEach(( problem, name )=>{\n      let problemDesc = new ProblemDescriptor(name, problem)\n      this.problemList.push(problemDesc)\n      this.problems.set(problemDesc.key,problemDesc);\n      problemDesc.services.forEach((serviceDesc)=>{\n        this.services.set(serviceDesc.key, serviceDesc)\n      })\n    })\n  }\n\n  \n  \n  selectProblem(selectedProblem: ProblemDescriptor){\n    this.selectedProblem = selectedProblem;\n  }\n  \n\n  selectService(selectedService: ServiceDescriptor){\n    let name = selectedService.key;\n    if ( this.savedParams.has(name) ){\n      //TODO: Deep copy param values from  to selectedProblem object, to account for changes in the problem structure.\n      this.selectedService = this.savedParams.get(name)\n    }else{\n      this.savedParams.set(name,selectedService);\n      this.selectedService = selectedService;\n    }\n    this.selectedProblem = this.selectedService?.parent;\n  }\n\n\n\n}\n","import { FsNodeFolder, FsServiceDriver } from '../fs-service/fs.service';\nimport { PythonCompiler as PythonCompiler } from './python-compiler.service';\n\n// --- PyodideDriver --- \n\ntype UID = string; // should I ? \n\ntype PromiseResolver<T> = (value: T | PromiseLike<T>) => void;\n\ntype stdCallback = (data:string)=>void;\n\n\n\nexport enum PyodideMessageType {\n  Ready = 'Ready',\n  InstallPackages = 'InstallPackages',\n  ExecuteFile = 'ExecuteFile',\n  ExecuteCode = 'ExecuteCode',\n  SubscribeStdout = 'SubscribeStdout',\n  SubscribeStderr = 'SubscribeStderr',\n  SendStdin = 'SendStdin',\n  CreateDirectory = 'CreateDirectory',\n  WriteFile = 'WriteFile',\n  ReadFile = 'ReadFile',\n  ReadDirectory = 'ReadDirectory',\n  ScanDirectory = 'ScanDirectory',\n  Delete = 'Delete',\n  Exists = 'Exists',\n}\nexport interface PyodideMessage {\n  uid: UID;\n  type: PyodideMessageType;\n  args: string[];\n  contents: Array<string|ArrayBuffer>;\n}\n\nexport interface PyodideRequest {\n  uid: UID;\n  timestamp: number;\n  message: PyodideMessage;\n}\n\nexport interface PyodideResponse {\n  uid: UID;\n  timestamp: number;\n  success: boolean;\n  message: PyodideMessage;\n  errors: string[];\n}\n\nexport interface PyodideRequestHandler {\n  uid: UID;\n  request: PyodideRequest;\n  resolvePromise: PromiseResolver<any>\n}\n\n\nexport class PyodideDriver implements FsServiceDriver, PythonCompiler {\n  public worker: Worker = new Worker(new URL('../../workers/python-compiler.worker', import.meta.url));\n  public rootDir = \".\"\n  public requestIndex = new Map<UID, PyodideRequestHandler>();\n\n  public binEncoder = new TextEncoder(); // always utf-8\n  public binDecoder = new TextDecoder(\"utf-8\");\n\n  onStdout?: stdCallback\n  onStderr?: stdCallback\n\n  constructor() {\n    //alert('driver built!');\n    this.worker.onmessage = (event: MessageEvent) => { this.didRecieve(event.data) };   \n  }\n\n  mount(path: string) {\n    //TODO\n  }\n\n  unmount(path: string) {\n    //TODO\n  }\n\n\n\n  didRecieve(response: PyodideResponse) {\n    if (!response) {return;}\n    console.log('PyodideFsDriver:didRecieve:', response.message.type, response);\n\n    let requestHandler = this.requestIndex.get(response.uid);\n    if (requestHandler != null) {\n      let removeRequest = true;\n      let msgSent = requestHandler.request.message;\n      let msgRecived = response.message;\n      let resolvePromise = requestHandler.resolvePromise;\n\n      switch(response.message.type){\n        case PyodideMessageType.Ready:           this.didReceiveReady(msgSent, msgRecived, resolvePromise); break;\n        \n        case PyodideMessageType.InstallPackages: this.didReceiveInstallPackages(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.ExecuteCode:     this.didReceiveExecuteCode(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.ExecuteFile:     this.didReceiveExecuteFile(msgSent, msgRecived, resolvePromise); break;\n\n        case PyodideMessageType.SubscribeStdout: this.didReceiveSubscribeStdout(msgSent, msgRecived, resolvePromise); removeRequest = false; break;\n        case PyodideMessageType.SubscribeStderr: this.didReceiveSubscribeStderr(msgSent, msgRecived, resolvePromise); removeRequest = false; break;\n        case PyodideMessageType.SendStdin:       this.didReceiveSendStdin(msgSent, msgRecived, resolvePromise); break;\n\n        case PyodideMessageType.CreateDirectory: this.didReceiveCreateDirectory(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.ReadDirectory:   this.didReceiveReadDirectory(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.ScanDirectory:   this.didReceiveScanDirectory(msgSent, msgRecived, resolvePromise); break;\n\n        case PyodideMessageType.WriteFile:       this.didReceiveWriteFile(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.ReadFile:        this.didReceiveReadFile(msgSent, msgRecived, resolvePromise); break;\n        \n        case PyodideMessageType.Delete:          this.didReceiveDelete(msgSent, msgRecived, resolvePromise); break;\n        case PyodideMessageType.Exists:          this.didReceiveExists(msgSent, msgRecived, resolvePromise); break;\n      }\n      \n      if (removeRequest){\n        this.requestIndex.delete(response.uid)\n      }\n    }\n  }\n\n  didReceiveReady(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveReady: \")\n    let ready = msgRecived.args[0]\n    ///alert(111)\n    resolvePromise(ready == 'true'?true:false)\n  }\n\n  didReceiveInstallPackages(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<string> ){\n    console.log(\"didReceiveInstallPackages: \")\n    if (msgSent.contents.length != 1){ \n      resolvePromise(\"\"); \n    }\n    console.log(msgRecived.contents)\n\n    resolvePromise(this.toString(msgRecived.contents[0]))\n  } \n\n  didReceiveExecuteCode(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<string> ){\n    console.log(\"didReceiveExecuteCode: \")\n    if (msgSent.contents.length != 1){ \n      resolvePromise(\"\"); \n    }\n    console.log(msgRecived.contents)\n\n    resolvePromise(this.toString(msgRecived.contents[0]))\n  } \n\n  didReceiveExecuteFile(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<string> ){\n    console.log(\"didReceiveExecuteFile: \")\n    if (msgSent.contents.length != 1){ \n      resolvePromise(\"\"); \n    }\n    console.log(msgRecived.contents)\n\n    resolvePromise(this.toString(msgRecived.contents[0]))\n  } \n\n  didReceiveSubscribeStdout(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveSubscribeStdout: \")\n    if (msgRecived.args.length == 1){ \n      let result = msgRecived.args[0] == 'true'\n      resolvePromise(result); \n    }\n    if ( this.onStdout && msgRecived.contents.length > 0){\n      console.log(msgRecived.contents)\n      let content = msgRecived.contents[0]\n      this.onStdout(this.toString(content))\n    }\n  } \n\n  didReceiveSubscribeStderr(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveSubscribeStderr: \")\n    if (msgRecived.args.length == 1){ \n      let result = msgRecived.args[0] == 'true'\n      resolvePromise(result); \n    }\n    if ( this.onStderr && msgRecived.contents.length > 0){\n      console.log(msgRecived.contents)\n      let content = msgRecived.contents[0]\n      this.onStderr(this.toString(content))\n    }\n  } \n\n  didReceiveSendStdin(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveSendStdin: \")\n    if (msgRecived.args.length > 0){ \n      let result = msgRecived.args[0] == 'true'\n      resolvePromise(result); \n    }\n\n    resolvePromise(false)\n  } \n\n  didReceiveCreateDirectory(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveCreateDirectory: \")\n    if (msgSent.args.length != 1){ \n      resolvePromise(false); \n    }\n    let pathSent = msgSent.args[0];\n    let pathRecived = msgRecived.args[0];\n\n    resolvePromise(pathSent == pathRecived)\n  } \n\n  didReceiveReadDirectory(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<FsNodeFolder | null> ){\n    //TODO: do the actual thing \n    let replacer = (key:any, value:any) => {\n      if (value instanceof ArrayBuffer){\n        let buffer = new Uint8Array(value)\n        return Array.from(buffer)\n      }\n      return value\n    }\n    let node = JSON.parse(this.toString(msgRecived.contents[0]),this.jsonReplacer)\n    console.log(\"didReceiveReadDirectory: \", node)\n    resolvePromise( node )\n  }\n\n  didReceiveScanDirectory(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<FsNodeFolder | null> ){\n    //TODO: do the actual thing \n    let node = JSON.parse(this.toString(msgRecived.contents[0]),this.jsonReplacer)\n    console.log(\"didReceiveScanDirectory: \", node)\n    resolvePromise( node )\n  }\n\n  jsonReplacer(key:any,value:any){\n    if ( typeof value !== 'object') {return value; }\n    //console.log('jsonReplacer:object:',key,value)\n    if (!(\"flags\" in value && \"constructor\" in value && \"data\" in value )){ return value; }\n    //console.log('jsonReplacer:constructor',value.constructor)\n    if ( value.constructor == 'ArrayBuffer' && value.data instanceof Array){\n      //console.log('jsonReplacer:ArrayBuffer')\n      let buffer = Uint8Array.from(value.data).buffer\n      console.log('jsonReplacer:ArrayBuffer',buffer)\n      return buffer;\n    }\n    return value\n  }\n\n\n\n  didReceiveReadFile(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<string|ArrayBuffer> ){\n    console.log(\"didReceiveReadFile:\\n\", msgRecived.contents[0])\n    resolvePromise( msgRecived.contents[0] )\n  }\n  \n  didReceiveWriteFile(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<number> ){\n    console.log(\"didReceiveWriteFile: \")\n    console.log(msgRecived.args)\n    console.log(msgRecived.contents)\n    //TODO:\n    resolvePromise(msgRecived.contents.length)\n  }\n  \n\n  didReceiveDelete(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveDelete: \")\n    resolvePromise(true)\n  }\n\n  didReceiveExists(msgSent:PyodideMessage, msgRecived:PyodideMessage, resolvePromise:PromiseResolver<boolean> ){\n    console.log(\"didReceiveExists: \")\n    let res = msgRecived.args[0]\n    resolvePromise(res  == 'true' )\n  }\n\n  sendMessage<T>(message: PyodideMessage) {\n    //alert('sendMessage:'+message.type);\n    let request: PyodideRequest = {\n      uid: message.uid,\n      timestamp: Date.now(),\n      message: message\n    }\n\n    let promiseResolver: PromiseResolver<T>;\n    let resultPromise =  new Promise<T>((resolve, reject) => {\n      promiseResolver = resolve;\n    })\n    \n    let requestHandler: PyodideRequestHandler = {\n      uid: message.uid,\n      request: request,\n      resolvePromise: (value)=>{ promiseResolver(value) }\n    }\n\n    this.requestIndex.set(message.uid, requestHandler);\n    this.worker.postMessage(request);\n\n    return resultPromise;\n  }\n\n  async ready(): Promise<boolean> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.Ready,\n      args: [],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n  async installPackages(packages: string[]): Promise<string> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.InstallPackages,\n      args: packages,\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<string>(message);\n\n    return resultPromise;\n  }\n\n  async executeCode(code: string): Promise<string> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.ExecuteCode,\n      args: [],\n      contents: [code],\n    }\n    \n    let resultPromise = this.sendMessage<string>(message);\n\n    return resultPromise;\n  }\n\n  async executeFile(fullpath: string): Promise<string> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.ExecuteFile,\n      args: [fullpath],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<string>(message);\n\n    return resultPromise;\n  }\n\n  subscribeStdout(enable=true, onStdout?:stdCallback){\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.SubscribeStdout,\n      args: [enable?'true':'false'],\n      contents: [],\n    }\n    if (onStdout && enable){\n      this.onStdout = (msg:string)=>{onStdout(msg)}\n    }else{\n      this.onStdout = undefined;\n    }\n\n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n  subscribeStderr(enable=true, onStderr?:stdCallback){\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.SubscribeStderr,\n      args: [enable?'true':'false'],\n      contents: [],\n    }\n    if (onStderr && enable){\n      this.onStderr = (msg:string)=>{onStderr(msg)}\n    }else{\n      this.onStderr = undefined;\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n  sendStdin(msg:string){\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.SendStdin,\n      args: [],\n      contents: [msg],\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n\n  async createDirectory(fullpath: string): Promise<boolean> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.CreateDirectory,\n      args: [fullpath],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n  async readFile(fullpath: string, binary: boolean): Promise<string|ArrayBuffer> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.ReadFile,\n      args: [fullpath],\n      contents: [],\n    }\n    if(binary){message.args.push('binary');}\n    let resultPromise = this.sendMessage<string|ArrayBuffer>(message);\n    return resultPromise;\n  }\n\n  async writeFile(fullpath: string, content: string|ArrayBuffer): Promise<number> {\n    console.log(\"writeFile: \"+fullpath)\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.WriteFile,\n      args: [fullpath],\n      contents: [],\n    }\n    message.contents.push(content)\n    \n    let resultPromise = this.sendMessage<number>(message);\n    return resultPromise;\n  }\n\n  async readDirectory(fullpath: string): Promise<FsNodeFolder | null> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.ReadDirectory,\n      args: [fullpath],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<FsNodeFolder | null>(message);\n    return resultPromise;\n  }\n\n\n\n  async scanDirectory(fullpath?: string, recursive = false, parent?: FsNodeFolder): Promise<FsNodeFolder | null> {\n    if (!fullpath) { fullpath = './' }\n    \n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.ScanDirectory,\n      args: [fullpath, recursive?'recursive':'flat'],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<FsNodeFolder | null>(message);\n    return resultPromise;\n  }\n\n\n  async delete(fullpath: string): Promise<boolean> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.Delete,\n      args: [fullpath],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n\n  async exists(fullpath: string): Promise<boolean> {\n    let message: PyodideMessage = {\n      uid: this.requestUID(),\n      type: PyodideMessageType.Exists,\n      args: [fullpath],\n      contents: [],\n    }\n    \n    let resultPromise = this.sendMessage<boolean>(message);\n\n    return resultPromise;\n  }\n\n  toString(data:string|ArrayBuffer){\n    if(data instanceof ArrayBuffer) { return this.binDecoder.decode(data) }\n    return data\n  }\n\n  toArrayBuffer(data:string|ArrayBuffer){\n    if(data instanceof ArrayBuffer) { return data }\n    return this.binEncoder.encode(data)\n  }\n  \n\n\n  requestUID(): UID {\n    var timestap = new Date().getTime();\n    let seed = Math.floor(Math.random() * 100000000);\n    return 'uid-' + timestap + '-' + seed;\n  }\n}\n  /*\n}\n \n \n  sendMessage(type: PyodideFsMessageType, args?:string[], contents?:string[], response?:(data:string)=>void){\n    if(!(args)){ args = []; }\n    if(!(contents)){ contents = []; }\n    \n    const uid = this.requestUID();\n \n    \n    \n    const message: PyodideFsMessage = {\n      type: type,\n      uid: uid,\n      args: args,\n      contents: contents\n    }\n    this.worker.postMessage(message);\n    let onData = (data:Event)=>{\n      if(response){response(data);}\n      if(this.worker.removeAllListeners){worker.removeAllListeners(uid)}\n    }\n    worker.addEventListener(uid, onData);\n  }\n \n  async createDirectory(fullpath:string): Promise<boolean>{\n    return false;\n  }\n \n  async writeFile(fullpath:string, content:string): Promise<number>{\n    return -1;\n  }\n \n  async readDirectory(fullpath:string):Promise<FsNode|null>{\n    return null;\n  }\n \n  \n \n  async scanDirectory(path?:string, recursive=false, parent?:FsNode):Promise<FsNode>{\n    if(!path){path='./'}\n    return {name:path,path:path,isFolder:false, depth:-1};\n  }\n \n \n \n  /*\n  sendMessages(){\n    this.pycs.worker.onmessage = ({ data }) => {\n      console.log(`page got message: ${data}`);\n    }\n    \n    const messageInstall: PythonCompilerMessageInterface = {\n      type: PythonCompilerMessageInterfaceType.PackageInstall,\n      packages: ['fake-traffic'],\n    }\n    this.pycs.worker.postMessage(messageInstall);\n \n    const messageToSend: PythonCompilerMessageInterface = {\n      type: PythonCompilerMessageInterfaceType.ExecuteCode,\n      code: `\n      import os\n      print(os.listdir('/'))\n      print(os.listdir('/mnt'))\n      import fox\n      import mainC\n  `\n    }\n \n    this.pycs.worker.postMessage(messageToSend);\n \n  }\n \n  async createDirectory(fullpath:string): Promise<boolean>{\n    let res = await this.fs.createDirectory(fullpath);\n    return await this.fs.exists(fullpath);\n  }\n \n  async writeFile(fullpath:string, content:string): Promise<number>{\n    let res = await this.fs.writeFile(fullpath, content);\n    if (!(await this.fs.exists(fullpath)) ) {return -1;}\n    return res.data.length;\n  }\n \n  async readDirectory(fullpath:string):Promise<FsNode|null>{\n    if ( await this.fs.exists(fullpath) ) {\n      return this.scanDirectory(fullpath, false );\n    }\n    return null;\n  }\n  */\n","import { Injectable } from '@angular/core';\nimport { PyodideDriver, PyodideRequest } from './pydiode-driver';\nimport { FsService } from '../fs-service/fs.service';\nimport { ApiService } from '../api-service/api.service';\nimport { Commands } from '../api-service/api.commands';\nimport { ConsoleWidgetComponent } from 'src/app/widgets/console/console-widget/console-widget.component';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PythonCompilerService {\n  public driverName = 'pyodide';\n  public configFile = \".config.json\"\n  \n  public fs;\n  public driver?: PyodideDriver;\n  public worker: Worker = new Worker(new URL('../../workers/python-compiler.worker', import.meta.url));\n  public cmdConnect?:Commands.Connect;\n  public consoleWidget?:ConsoleWidgetComponent;\n\n  constructor( private _fs:FsService) { \n    this.fs = _fs;\n    this.driver = new PyodideDriver();\n    this.fs.registerDriver(this.driverName, this.driver); \n  }\n\n  async createPythonProject(){\n    \n    if (!this.driver) {return false}\n\n    if (await this.driver.exists(\"/\"+this.configFile)){\n      console.log(\"createPythonProject: Skipping, config file already present\")\n      return true;\n    }\n  \n    let configContent = JSON.stringify(new PythonConfig(), null, 4)\n    await this.driver?.writeFile('/'+this.configFile, configContent );\n    let content = `print(\"asd\") \\ndata = 123 \\nprint(\"data:\", data)`;\n    await this.driver?.writeFile('/main.py', content);\n    await this.driver?.createDirectory('/data/');\n\n    let bot = `import time\ndef sleep(seconds):\n    start = now = time.time()\n    while now - start < seconds:\n        now = time.time()\n\nsleep(2)\nprint(\"100 0\")`\n\n    await this.driver?.writeFile('/free_sum_mysimplebot.py', bot);\n    return true\n  }\n\n  async readPythonConfig(){\n    if (!this.driver) {return null}\n\n    if (!await this.driver.exists(\"/\"+this.configFile)){\n      console.log(\"readPythonConfig: config file doesn't exisit!\")\n      return null;\n    }\n    \n    let configContent = await this.driver?.readFile('/'+this.configFile, false ) as string;\n    let config = JSON.parse(configContent) as PythonConfig\n    return config\n  }\n\n  async runProject(){\n    let config = await this.readPythonConfig()\n    if (!config){return null;}\n    await this.driver?.installPackages(config.PACKAGES)\n    let stdout = await this.driver?.executeFile(config!.MAIN)\n    console.log(stdout)\n    return stdout    \n  }\n\n  async installPackages(packages:string[]){\n    let msg = {\n      type: PythonCompilerMessageInterfaceType.InstallPackages,\n      packages: packages,\n    } as PythonCompilerMessageInterface;\n    this.worker.postMessage(msg)\n  }\n\n  async executeFile(fullpath:string){\n    let msg = {\n      type: PythonCompilerMessageInterfaceType.ExecuteFile,\n      path: fullpath,\n    } as PythonCompilerMessageInterface;\n    this.worker.postMessage(msg)\n  }\n\n  //-------------- TEST CONNECT\n  async onApiError(message: string){\n    alert(\"Error: \"+message)\n  }\n\n  public onStdout(data:string){\n    this.consoleWidget!.print(data);\n    this.cmdConnect!.sendBinary(data + \"\\n\"); //lo \\n va aggiunto all'output del bot python\n  }\n\n  async apiConnect() {\n    let api = new ApiService();\n    let problem_name = \"sum_testAPI\";\n    let service = \"free_sum\";\n\n    let onConnectionBegin = (onConnectionBegin: string[]) => {console.log(\"Connection Begin -> \" + onConnectionBegin); };\n    let onConnectionStart = () => {console.log(\"Connection Start\")};\n    let onConnectionClose = (onConnectionClose: string[]) => {console.log(onConnectionClose)};\n    \n    let onData = (data: string)=>{\n      console.log(\"Binary data: \"+data);\n      this.consoleWidget!.print(data);\n    };\n\n    let req = api.Connect(problem_name, service, undefined, undefined, undefined, undefined, onConnectionBegin, onConnectionStart, onConnectionClose, onData);\n    req.onError = this.onApiError;\n\n    return req;\n  }\n\n  async testConnectAPI(consoleWidget:ConsoleWidgetComponent){\n    this.consoleWidget = consoleWidget;\n    this.driver?.subscribeStdout(true,(msg)=>{this.onStdout(msg)})\n\n    this.cmdConnect = await this.apiConnect();\n\n    let config = await this.readPythonConfig()\n    if (!config){return null;}\n    await this.driver?.installPackages(config.PACKAGES)\n    let stdout = await this.driver?.executeFile(config!.MAIN)\n\n    //this.cmdConnect.sendConnectStop();\n    \n    console.log(stdout)\n    return stdout      \n  }\n\n  //--------------\n\n}\n\nclass PythonConfig {\n  MAIN = \"free_sum_mysimplebot.py\"\n  DEBUG = \"\"\n  DOWNLOAD_ATTACHMENT_AUTO = true\n  DEFAULT_PROJECT=\"3SAT\"\n  PACKAGES: string[] = [\"numpy\"]\n}\n\n\nexport enum PythonCompilerMessageInterfaceType {\n  InstallPackages = 'InstallPackages',\n  ExecuteFile = 'ExecuteFile',\n  ExecuteCode = 'ExecuteCode',\n  // ExecuteCodeResult = 'ExecuteCodeResult',\n}\n\nexport interface PythonCompilerMessageInterface {\n  type: PythonCompilerMessageInterfaceType;\n  packages?: string[];\n  path?: string;\n  code?: string;\n}\n\n\nexport interface PythonCompiler{\n  installPackages(packages: string[]): Promise<string>;\n\n  executeCode(code: string): Promise<string>;\n\n  executeFile(fullpath: string): Promise<string>;\n}\n\n\n\n\n\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport enum AppTheme {\n  light = \"light-theme.css\",\n  dark = \"dark-theme.css\",\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ThemeService {\n\n  public themeChanged: Subject<AppTheme> = new Subject<AppTheme>();\n\n  constructor(@Inject(DOCUMENT) private document: Document) {\n    const storedTheme: AppTheme = localStorage.getItem('theme') as AppTheme || AppTheme.light;\n    this.setTheme(storedTheme);\n  }\n\n  public get currentTheme(): AppTheme {\n    const storedTheme: string = localStorage.getItem('theme') || AppTheme.light;\n    return storedTheme as AppTheme;\n  }\n\n  public setTheme(theme: AppTheme): void {\n    if (theme === AppTheme.light || theme === AppTheme.dark) {\n      let themeLink = this.document.getElementById('app-theme') as HTMLLinkElement;\n\n      if (themeLink) {\n        localStorage.setItem('theme', theme);\n        themeLink.href = theme;\n        this.themeChanged.next(theme);\n      }\n    }\n  }\n\n  public toggleTheme(): void {\n    const storedTheme: string = localStorage.getItem('theme') || AppTheme.light;\n    const newTheme: AppTheme = storedTheme === AppTheme.light ? AppTheme.dark : AppTheme.light;\n    this.setTheme(newTheme);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tal-connect-view',\n  templateUrl: './connect-view.component.html',\n  styleUrls: ['./connect-view.component.scss']\n})\nexport class ConnectViewComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"tal-center-page\">\n  <h1>Connettiti ad un server</h1>\n  <div class=\"tal-center-form\">\n    <div class=\"tal-form-input\">\n      <label for=\"serverurl\">Server Url</label>\n      <input name=\"serverurl\" input type=\"text\" pInputText placeholder=\"https://...\" />\n    </div>\n    <p class=\"tal-error\">\n      <i class=\"pi pi-times-circle\"></i>\n      <span>Questo è un errore</span>\n    </p>\n    <button pButton>Connetti</button>\n  </div>\n\n</div>\n","import { Component, NgZone, OnInit } from '@angular/core';\nimport { Child, Command, open as ShellOpen } from '@tauri-apps/api/shell'\nimport { open as DialogOpen } from '@tauri-apps/api/dialog';\nimport { ApiService, Meta } from 'src/app/services/api-service/api.service';\nimport { Packets } from 'src/app/services/api-service/api.packets';\nimport { ReplaySubject } from 'rxjs';\nimport { Commands } from 'src/app/services/api-service/api.commands';\nimport { ConsoleModule } from 'src/app/widgets/console/console.module';\n@Component({\n  selector: 'app-demo-view',\n  templateUrl: './demo-view.component.html',\n  styleUrls: ['./demo-view.component.scss']\n})\nexport class DemoViewComponent implements OnInit {\n  public output = \"\";\n  public cmdConnect?:Commands.Connect;\n\n  constructor(\n    private zone: NgZone,\n    private api: ApiService\n    ) {}\n\n  ngOnInit(): void {\n    //api.problemList((problemList: any) => {console.log(problemList)});\n\n    /*\n    api.getAttachment(\n      \"piastrelle\",\n      ()=>{console.log(\"Attachment packet received\")},\n      (onAttachmentInfo: any) => {console.log(onAttachmentInfo)},\n      (data: ArrayBuffer) => {\n        console.log(\"ArrayBuffer received\");\n\n        const arrayBufferToFile = (buffer:any, filename:any) => {\n          const blob = new Blob([buffer], { type: 'application/octet-stream' });\n          return new File([blob], filename, { type: 'application/octet-stream' });\n        };\n\n        let file = arrayBufferToFile(data, \"/home/michele/piastrelle.tar\");\n        console.log(file);\n      }\n    );\n    \n\n    api.Connect(\n      \"sum\", \n      \"synopsis\", \n      {\"service\":\"free_sum\"}, \n      undefined,\n      undefined,\n      undefined,\n      (onConnectionBegin: any) => {console.log(\"Connection Begin -> \" + onConnectionBegin); },\n      () => {console.log(\"Connection Start\")},\n      (onConnectionClose: any) => {console.log(onConnectionClose)},\n      (onData: any) => {console.log(onData)},\n      (onError: any) => {alert(onError)},\n    );\n\n    */\n    \n  }\n  //API Test\n    \n  async onApiError(message: string){\n    alert(\"Error: \"+message)\n  }\n\n  public refreshOutput() {\n    this.zone.run(() => this.output += \"\")\n  }\n\n  async apiProblemList() {\n    let onSuccess = (problemList:Map<string, Meta>)=>{ \n      console.log(problemList);\n      this.refreshOutput();\n    }\n    let req = this.api.problemList( onSuccess );\n    req.onError = this.onApiError;\n  }\n\n  async apiGetAttachment() {\n    let problem_name = \"piastrelle\";\n\n    let onAttachment = ()=>{console.log(\"Attachment packet received\")};\n    let onAttachmentInfo = (onAttachmentInfo: any) => {console.log(onAttachmentInfo)};\n    \n    let onData = (data: ArrayBuffer)=>{\n      console.log(data);\n      this.refreshOutput();\n    };\n\n    let req = this.api.GetAttachment(problem_name, onAttachment, onAttachmentInfo, onData);\n    req.onError = this.onApiError;\n\n  }\n\n  async apiConnect() {\n    let problem_name = \"sum_testAPI\";\n    let service = \"free_sum\";\n\n    let onConnectionBegin = (onConnectionBegin: string[]) => {console.log(\"Connection Begin -> \" + onConnectionBegin); };\n    let onConnectionStart = () => {console.log(\"Connection Start\")};\n    let onConnectionClose = (onConnectionClose: string[]) => {console.log(onConnectionClose)};\n    \n    let onData = (data: string)=>{\n      this.output += ''+data\n      console.log(\"Binary data: \"+data);\n      this.refreshOutput();\n    };\n\n    let req = this.api.Connect(problem_name, service, undefined, undefined, undefined, undefined, onConnectionBegin, onConnectionStart, onConnectionClose, onData);\n    req.onError = this.onApiError;\n\n    this.cmdConnect = req;\n\n    this.sendBinary();\n  }\n\n  async sendBinary() {\n    setTimeout(() => {this.cmdConnect?.sendBinary(\"100 0\\n\");}, 1500);\n    //setTimeout(() => {this.cmdConnect?.sendConnectStop();}, 2500);\n    /*\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 2500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 3500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 4500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 5500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 6500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 7500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 8500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 9500);\n    setTimeout(async () => {this.cmdConnect?.sendBinary(\"100 0\");}, 10500);\n    */\n\n    setTimeout(() => {console.log(\"this.cmdConnect!.tal.isOpen()\");\n    console.log(this.cmdConnect!.tal.isOpen());}, 2500);\n  }\n\n\n}\n","<div style=\"display:flex; flex-direction: row\">\n    <div>\n        <div>\n            API Demo\n        </div>\n        <div>\n            <button (click)=\"apiProblemList()\">Problem List</button>\n            <button (click)=\"apiGetAttachment()\">Get Attachment</button>\n            <button (click)=\"apiConnect()\">Connect</button>\n        </div>\n    </div>\n    \n    \n    <div>\n        <pre>{{output}}</pre>\n    </div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { EditorWidgetComponent } from 'src/app/widgets/code-editor/editor-widget/editor-widget.component';\n\n\n@Component({\n  selector: 'tal-home-view',\n  templateUrl: './home-view.component.html',\n  styleUrls: ['./home-view.component.scss']\n})\nexport class HomeViewComponent implements OnInit {\n  \n  @ViewChild(\"editorWidget\") public editorWidget!: EditorWidgetComponent;\n\n  constructor(\n  ) {\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"tal-home-container\">\n  <div class=\"tal-home-editor\">\n    <tal-editor-widget></tal-editor-widget>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tal-select-problem-view',\n  templateUrl: './select-problem-view.component.html',\n  styleUrls: ['./select-problem-view.component.scss']\n})\nexport class SelectProblemViewComponent implements OnInit {\n\n  public problems: any[] = [\n    {\n      id: 1, name: 'Problem 1',\n    },\n    {\n      id: 2, name: 'Problem 2',\n    },\n    {\n      id: 3, name: 'Problem 3',\n    },\n    {\n      id: 4, name: 'Problem 4',\n    },\n  ];\n\n  public selectedProblem: any = null;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"tal-center-page\">\n  <h1>Seleziona un problema da risolvere</h1>\n  <div class=\"tal-center-form\">\n    <div class=\"tal-problems-list\">\n      <ng-container *ngFor=\"let problem of problems\">\n        <div class=\"tal-problem\" (click)=\"selectedProblem=problem.id\">\n          <p-radioButton name=\"groupname\" [value]=\"problem.id\" [(ngModel)]=\"selectedProblem\">\n          </p-radioButton>\n          <div class=\"tal-problem-details\">\n            <p>{{problem.name}}</p>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n    <button pButton>Inizia</button>\n  </div>\n</div>\n","import { Component, EventEmitter, forwardRef, Input, OnChanges, OnInit, Output, ViewChild } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { EditorComponent } from 'ngx-monaco-editor-v2';\nimport { AppTheme, ThemeService } from 'src/app/services/theme-service/theme.service';\n\nconst noop = () => { };\n\nconst CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => CodeEditorWidgetComponent),\n  multi: true,\n};\n\n@Component({\n  selector: 'tal-code-editor-widget',\n  templateUrl: './code-editor-widget.component.html',\n  styleUrls: ['./code-editor-widget.component.scss'],\n  providers: [CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR],\n})\nexport class CodeEditorWidgetComponent implements ControlValueAccessor, OnInit, OnChanges {\n  public editorOptions: any;\n\n  @Input(\"lang\") public lang: string = \"\";\n\n  @ViewChild(\"editor\") public editor!: EditorComponent;\n\n  private innerValue: string = '';\n  @Output('change') public onChange = new EventEmitter<Event>();\n  @Output('input') public onInput = new EventEmitter<InputEvent>();\n\n\n  constructor(\n    private readonly themeService: ThemeService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.themeService.themeChanged.subscribe((theme) => {\n      this.updateEditorOptions();\n    });\n\n    \n    this.updateEditorOptions();\n  }\n\n  ngOnChanges(): void {\n    this.updateEditorOptions();\n  }\n\n  // Placeholders for the callbacks which are later provided\n  // by the Control Value Accessor\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: (_: any) => void = noop;\n\n  // get accessor\n  public get value(): string {\n    return this.innerValue;\n  }\n\n  // Set accessor including call the onchange callback\n  public set value(v: string) {\n    if (v !== this.innerValue) {\n      this.innerValue = v;\n      this.onChangeCallback(v);\n    }\n  }\n  // From ControlValueAccessor interface\n  public writeValue(value: any) {\n    if (value !== this.innerValue) {\n      this.innerValue = value;\n      this.onChangeCallback(value);\n    }\n  }\n\n  \n  public change(event:Event): void {\n    this.onChange.emit(event);\n  }\n  public input(event:InputEvent): void {\n    this.onInput.emit(event);\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnChange(fn: any) {\n    this.onChangeCallback = fn;\n  }\n\n  // From ControlValueAccessor interface\n  public registerOnTouched(fn: any) {\n    this.onTouchedCallback = fn;\n  }\n\n\n  public updateEditorOptions(): void {\n    console.log(this.lang);\n    this.editorOptions = {\n      language: this.lang,\n      theme: this.theme,\n      automaticLayout: true\n    }\n  }\n\n  public get theme(): string {\n    switch (this.themeService.currentTheme) {\n      case AppTheme.dark:\n        return \"vs-dark\";\n      default:\n        return \"vs\";\n    }\n  }\n\n}\n","<div class=\"tal-code-editor-container\">\n  <div class=\"tal-code-editor-header\"></div>\n  <div class=\"tal-code-editor\">\n    <ngx-monaco-editor #editor [options]=\"editorOptions\" [(ngModel)]=\"value\"></ngx-monaco-editor>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CodeEditorWidgetComponent } from './code-editor-widget/code-editor-widget.component';\nimport { EditorFilesWidgetComponent } from './editor-files-widget/editor-files-widget.component';\nimport { EditorWidgetComponent } from './editor-widget/editor-widget.component';\nimport { MonacoEditorModule } from 'ngx-monaco-editor-v2';\nimport { FormsModule } from '@angular/forms';\nimport { ConfirmationService, SharedModule } from 'primeng/api';\nimport { OverlayPanelModule } from 'primeng/overlaypanel';\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\nimport { SplitterModule } from 'primeng/splitter';\nimport { ConsoleModule } from '../console/console.module';\nimport { TooltipModule } from 'primeng/tooltip';\nimport { FileViewerWidgetComponent } from './file-viewer-widget/file-viewer-widget.component';\n\n@NgModule({\n  declarations: [\n    CodeEditorWidgetComponent,\n    EditorFilesWidgetComponent,\n    EditorWidgetComponent,\n    FileViewerWidgetComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    MonacoEditorModule,\n    ConfirmDialogModule,\n    OverlayPanelModule,\n    SplitterModule,\n    SharedModule,\n    ConsoleModule,                                      \n    TooltipModule\n  ],\n  exports: [\n    CodeEditorWidgetComponent,\n    EditorFilesWidgetComponent,\n    EditorWidgetComponent\n  ],\n  providers: [ConfirmationService],\n})\nexport class CodeEditorModule { }\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, QueryList, ViewChild, ViewChildren } from '@angular/core';\n\nimport { ConfirmationService } from 'primeng/api';\nimport { OverlayPanel } from 'primeng/overlaypanel';\nimport { FsNodeFile, FsNodeFolder, FsService, FsServiceDriver, Tar } from 'src/app/services/fs-service/fs.service';\nimport { FsServiceTest } from 'src/app/services/fs-service/fs.service.test';\nimport { PythonCompilerService } from 'src/app/services/python-compiler-service/python-compiler.service';\n\n\n\nexport interface TalFile extends FsNodeFile {}\nexport interface TalFolder extends FsNodeFolder {}\n\n\n@Component({\n  selector: 'tal-editor-files-widget',\n  templateUrl: './editor-files-widget.component.html',\n  styleUrls: ['./editor-files-widget.component.scss']\n})\nexport class EditorFilesWidgetComponent implements OnInit {\n  public driver?: FsServiceDriver;\n  public rootDir = \"/\"\n  public driverName = 'pyodide'\n  public emptyNode = {name:\"\", path: this.rootDir, files:[], folders:[]}\n  public showHidden = false\n\n  @Input(\"root\") root: TalFolder = this.emptyNode;\n\n  \n  public editingValue: string = \"\";\n  public editingItem: TalFile | TalFolder | null = null;\n  public editingItemFolder: TalFolder | null = null;\n  public editingItemError: boolean = false;\n\n  public newItemValue: string = \"\";\n  public newItemType: \"file\" | \"folder\" = \"file\";\n  public newItemFolder: TalFolder | null = null;\n  public newItemError: boolean = false;\n\n  public openedFile: TalFile | null = null;\n\n  @ViewChild(\"nameEditing\") public nameEditingElement?: ElementRef;\n  @ViewChild(\"newItemName\") public newItemNameElement?: ElementRef;\n\n  @ViewChildren(OverlayPanel) public panels?: QueryList<OverlayPanel>;\n\n  @Output(\"change\") public change = new EventEmitter<TalFolder>();\n  @Output(\"open\") public open = new EventEmitter<TalFile>();\n  @Output(\"showHiddenChanged\") public showHiddenChanged = new EventEmitter<boolean>(); \n\n  constructor(\n    private confirmationService: ConfirmationService, \n    private fs:FsService,\n    private python: PythonCompilerService,\n    ) {\n    //this.driver = fs.getDriver('pyodide');\n    this.driver = fs.getDriver(this.driverName);\n    //alert(this.driver)\n    //this.driver?.writeFile(this.editingItem.path,this.editingItem)\n   }\n\n  ngOnInit() {\n    this.bindCollapseEvent();\n    \n    let test = new FsServiceTest(this.fs, this.driverName)\n    //this.rootDir = this.driver?.rootDir ?? this.rootDir;\n    this.driver?.ready().then((ready)=>{\n      //alert('ready!');\n      \n      this.python.createPythonProject().then(()=>{\n        this.refreshRoot();\n        //alert('ready!');\n      })\n      \n    })\n\n    \n\n  }\n\n  refreshRoot(){\n    this.driver?.scanDirectory(this.rootDir).then((folder)=>{\n      this.root = folder ?? this.emptyNode;\n      this.bindCollapseEvent();\n      this.change?.emit(this.root);\n    });\n    \n  }\n\n  private bindCollapseEvent() {\n    setTimeout(() => {\n      const rows = document.getElementsByClassName(\"collapse-toggle\");\n      for (let i = 0; i < rows.length; i++) {\n        if (!rows[i].classList.contains(\"bound\")) {\n          let row = rows[i];\n          row.addEventListener(\"click\", (event) => { this.handleClickEvent(event) });\n          row.classList.add(\"bound\");\n        }\n      }\n    }, 0);\n  }\n\n  public handleClickEvent(event:Event){\n    event.preventDefault();\n    event.stopPropagation();\n    const row = event.target as HTMLElement;\n    let newParent: HTMLElement = row;\n    let safeCount = 0;\n    do {\n      newParent = newParent.parentElement as HTMLElement;\n      safeCount++;\n    } while (!newParent.classList.contains(\"tal-folder-subtree\") && safeCount < 10);\n\n    if (safeCount < 10) {\n      newParent.classList.toggle(\"collapsed\");\n    }\n  }\n\n  public closeAllContextMenus(event: Event) {\n    event.preventDefault();\n    if (this.panels) {\n      this.panels.forEach(p => p.hide());\n    }\n  }\n\n  public openFile(file: TalFile) {\n    this.driver?.readFile(file.path, false).then((content)=>{\n      file.content = content ?? \"\";\n      this.openedFile = file;\n      this.open?.emit(file);\n    })\n    \n  }\n\n  public toggleHidden(){\n    this.showHidden = !this.showHidden;\n    \n  }\n\n  public isVisibile(fsitem: TalFile|TalFolder){\n    let isHidden = fsitem.name.startsWith('.');\n    return this.showHidden || ( !this.showHidden && !isHidden ) \n  }\n\n  /** EDITING METHODS  **/\n  public startEditing(folder: TalFolder, item: TalFile | TalFolder) {\n    this.editingItem = item;\n    this.editingValue = item.name;\n    this.editingItemFolder = folder;\n    this.editingItemError = false;\n\n    setTimeout(() => {\n      if (this.nameEditingElement) {\n        this.nameEditingElement.nativeElement.focus();\n      }\n    }, 0);\n  }\n\n  public saveEditing() {\n    if (!this.editingItemError) {\n      if (this.editingItem) {\n        this.editingValue = this.editingValue.trim();\n        if (this.editingValue.length > 0) {\n          this.editingItem.name = this.editingValue;\n          this.change?.emit(this.root);\n        }\n      }\n    }\n    this.cancelEditing();\n  }\n\n  public cancelEditing() {\n    this.editingItem = null;\n    this.editingValue = \"\";\n    this.editingItemFolder = null;\n  }\n\n  public editItemChange() {\n    this.editingItemError = false;\n\n    if (this.editingItemFolder) {\n      const existingFile = this.editingItemFolder.files.find(f => f.name === this.editingValue);\n      const existingFolder = this.editingItemFolder.folders.find(f => f.name === this.editingValue);\n      if (existingFile || existingFolder) {\n        this.editingItemError = true;\n      }\n    }\n  }\n  /***************/\n\n  /** DELETE METHODS **/\n  public deleteFileClick(event: Event, file: TalFile) {\n    if (event.target) {\n      this.confirmationService.confirm({\n        target: event.target,\n        message: 'Sei sicuro di voler eliminare questo file?',\n        icon: 'pi pi-exclamation-triangle',\n        accept: () => {\n          //confirm action\n          this.deleteFile(this.root, file);\n        },\n        reject: () => {\n          //reject action\n        }\n      });\n    }\n  }\n\n  private deleteFile(currentFolder: TalFolder, file: TalFile) {\n    this.driver?.delete(file.path).then(()=>{\n      this.refreshRoot();\n    })\n    /*\n    if (currentFolder.files.indexOf(file) >= 0) {\n      currentFolder.files.splice(currentFolder.files.indexOf(file), 1);\n      this.change?.emit(this.root);\n    } else {\n      for (let i = 0; i < currentFolder.folders.length; i++) {\n        const folder: TalFolder = currentFolder.folders[i];\n        this.deleteFile(folder, file);\n      }\n    }\n    */\n  }\n\n  public deleteFolderClick(event: Event, folder: TalFolder) {\n    if (event.target) {\n      this.confirmationService.confirm({\n        target: event.target,\n        message: 'Sei sicuro di voler eliminare questa cartella? Tutti i file e le cartelle contenute verranno eliminate.',\n        icon: 'pi pi-exclamation-triangle',\n        accept: () => {\n          //confirm action\n          this.deleteFolder(this.root, folder);\n        },\n        reject: () => {\n          //reject action\n        }\n      });\n    }\n  }\n\n  private deleteFolder(currentFolder: TalFolder, folder: TalFolder) {\n    this.driver?.delete(folder.path).then(()=>{\n      this.refreshRoot();\n    })\n    /*\n    if (currentFolder.folders.indexOf(folder) >= 0) {\n      currentFolder.folders.splice(currentFolder.folders.indexOf(folder), 1);\n      this.change?.emit(this.root);\n    } else {\n      for (let i = 0; i < currentFolder.folders.length; i++) {\n        const subFolder: TalFolder = currentFolder.folders[i];\n        this.deleteFolder(subFolder, folder);\n      }\n    }\n    */\n  }\n  /***************/\n\n  /** CREATE METHODS **/\n  public syncFilesystem(folder: TalFolder) {\n    setTimeout(() => { \n      //this.refreshRoot();\n      this.python.createPythonProject().then(()=>{\n        this.refreshRoot();\n        //alert('ready!');\n      });\n    }, 0);\n  }\n\n\n  public addNewItem(folder: TalFolder, type: \"file\" | \"folder\") {\n    this.newItemValue = \"\";\n    this.newItemFolder = folder;\n    this.newItemType = type;\n    this.newItemError = false;\n\n    setTimeout(() => {\n      if (this.newItemNameElement) {\n        this.newItemNameElement.nativeElement.focus();\n      }\n    }, 0);\n  }\n\n  public cancelNewItem() {\n    this.newItemValue = \"\";\n    this.newItemFolder = null;\n  }\n\n  public saveNewItem() {\n    if (!this.newItemError) {\n      this.newItemValue = this.newItemValue.trim();\n      if (this.newItemValue.length > 0) {\n        if (this.newItemFolder) {\n          if (this.newItemType === \"file\") {\n            let path = this.newItemFolder.path + \"/\" + this.newItemValue\n            this.driver?.writeFile(path, \"\").then(()=>{\n              this.refreshRoot()\n            })\n            /*\n            this.newItemFolder.files.push({\n              name: this.newItemValue,\n              content: \"\"\n            } as TalFile );\n            */\n          } else {\n            this.driver?.createDirectory(\"./\"+this.newItemValue).then(()=>{\n              this.refreshRoot()\n            })\n            \n            this.newItemFolder.folders.push({\n              name: this.newItemValue,\n              path: \"./\"+this.newItemValue,\n              files: [],\n              folders: []\n            });\n\n            //this.bindCollapseEvent();\n          }\n          //this.refreshRoot()\n          //this.change?.emit(this.root);\n        }\n      }\n    }\n\n    this.newItemValue = \"\";\n    this.newItemFolder = null;\n  }\n\n  public newItemChange() {\n    this.newItemError = false;\n\n    if (this.newItemFolder) {\n      const existingFile = this.newItemFolder.files.find(f => f.name === this.newItemValue);\n      const existingFolder = this.newItemFolder.folders.find(f => f.name === this.newItemValue);\n      if (existingFile || existingFolder) {\n        this.newItemError = true;\n      }\n    }\n  }\n  /***************/\n\n  async import(event:Event) {\n    if (!( event.target instanceof HTMLInputElement )){ return false; }\n    let target = event.target as HTMLInputElement\n    if(!target.files || target.files.length == 0){ return false; }\n    let file = target.files[0]\n    let tarball = await file.arrayBuffer();\n    Tar.unpack(tarball, async (files, folders)=>{\n      console.log(\"extractTar:unpack:files\",files)\n      console.log(\"extractTar:unpack:folders\",folders)\n  \n      for(var idx in folders){\n        console.log(\"extractTar:createDirectory:\")\n        let folder = folders[idx]\n        let path = folder.path\n        console.log(\"extractTar:createDirectory:\",path)\n        await this.driver?.createDirectory(path)\n      }\n      console.log(\"extractTar:createDirectory:DONE\")\n      for(var idx in files){\n        console.log(\"extractTar:writeFile:\")\n        let file = files[idx]\n        let path = file.path\n        let content = file.content\n        console.log(\"extractTar:writeFile:\",path,content)\n        await this.driver?.writeFile(path, content)\n      }\n      console.log(\"extractTar:writeFile:DONE\")\n      this.refreshRoot()\n    })\n    console.log(\"import:data:\",tarball)\n    console.log(\"import:file:\",file)\n    \n    \n    return false\n  }\n\n  public export() {\n    let items = this.fs.treeToList(this.root)\n    if(items.length == 0 ) {\n      console.log(\"export: No files found to be exported\")\n    }\n\n    console.log(\"export:items:\",items)\n    Tar.pack(items, (tarball:ArrayBuffer)=>{\n      let tarname = \"tal-project-\"+ Date.now()+\".tar\"\n      console.log('export:tarball:',tarname,tarball)\n      this.triggerDownload(tarname, tarball, \"application/x-tar\")\n    })\n  }\n\n  public triggerDownload(filename:string, content:ArrayBuffer|string, mime=\"octet/stream\"){\n    let a = document.createElement(\"a\");\n    \n    const blob = new Blob([content], {type: mime});\n    let url = window.URL.createObjectURL(blob);\n    \n    a.style.display = \"none\";\n    a.download = filename;\n    a.href = url;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  }\n\n\n\n\n\n}\n","<div class=\"tal-editor-files-tree\">\n  <div class=\"tal-editor-files-header\">\n    <button pButton class=\"p-button p-button-secondary\" icon=\"pi pi-download\" title=\"Esporta\"\n      (click)=\"closeAllContextMenus($event); export()\" pTooltip=\"Esporta\"></button>\n    \n    <button pButton class=\"p-button p-button-secondary\" icon=\"pi pi-upload\" title=\"Importa\"\n      (click)=\"fileUpload.click()\" pTooltip=\"Importa\"></button>\n    \n    <input #fileUpload type=\"file\" style=\"display: none;\" accept=\"application/x-tar\" (change)=\"import($event)\"/>\n\n    <button pButton icon=\"pi pi-file\" title=\"Nuovo file\"\n      (click)=\"closeAllContextMenus($event); addNewItem(root, 'file')\" pTooltip=\"Nuovo file\"></button>\n    <button pButton icon=\"pi pi-folder\" title=\"Nuova cartella\"\n      (click)=\"closeAllContextMenus($event); addNewItem(root, 'folder')\" pTooltip=\"Nuova cartella\"></button>\n    <button pButton icon=\"pi pi-sync\" title=\"Refresh\" (click)=\"closeAllContextMenus($event); syncFilesystem(root)\"\n      pTooltip=\"Aggiorna\"></button>\n\n\n    <button pButton icon=\"pi pi-eye\" *ngIf=\"showHidden\" title=\"Toggle show hidden files\"\n      (click)=\"closeAllContextMenus($event); toggleHidden()\" pTooltip=\"Mostra file nascosti\"></button>\n    <button pButton icon=\"pi pi-eye-slash\" *ngIf=\"!showHidden\" title=\"Toggle show hidden files\"\n      (click)=\"closeAllContextMenus($event); toggleHidden()\" pTooltip=\"Nascondi file nascosti\"></button>\n  </div>\n  <div class=\"tal-editor-files-body\">\n    <ng-container *ngTemplateOutlet=\"TalFolder; context: { $implicit: root }\"></ng-container>\n  </div>\n</div>\n\n<ng-template #TalFolder let-folder>\n  <div class=\"tal-folder\">\n    <ng-container *ngFor=\"let subfolder of folder.folders\">\n      <div *ngIf=\"isVisibile(subfolder)\" class=\"tal-folder-subtree\">\n        <div class=\"tal-folder-row\" (contextmenu)=\"closeAllContextMenus($event); folderOverlayPanel.show($event)\">\n          <div class=\"tal-folder-title collapse-toggle\"\n            (dblclick)=\"closeAllContextMenus($event); startEditing(folder, subfolder)\">\n            <i class=\"pi pi-chevron-down\"></i>\n            <ng-container *ngIf=\"editingItem!=subfolder;else ItemEditingTemplate\">\n              <i class=\"pi pi-folder\"></i>\n              <p>{{subfolder.name}}</p>\n            </ng-container>\n          </div>\n          <div class=\"tal-row-settings\" *ngIf=\"editingItem!=subfolder\">\n            <div class=\"tal-row-button\" (click)=\"folderOverlayPanel.show($event)\">\n              <i class=\"pi pi-ellipsis-h\"></i>\n            </div>\n          </div>\n\n          <p-overlayPanel #folderOverlayPanel>\n            <ng-template pTemplate>\n              <div class=\"tal-contextmenu-container\">\n                <div class=\"tal-contextmenu-item\" (click)=\"closeAllContextMenus($event); addNewItem(subfolder, 'file')\">\n                  <i class=\"pi pi-plus\"></i>\n                  <p>Nuovo file</p>\n                </div>\n                <div class=\"tal-contextmenu-item\"\n                  (click)=\"closeAllContextMenus($event); addNewItem(subfolder, 'folder')\">\n                  <i class=\"pi pi-plus\"></i>\n                  <p>Nuova cartella</p>\n                </div>\n                <div class=\"tal-contextmenu-item\"\n                  (click)=\"closeAllContextMenus($event); startEditing(folder, subfolder)\">\n                  <i class=\"pi pi-pencil\"></i>\n                  <p>Rinomina cartella</p>\n                </div>\n                <div class=\"tal-contextmenu-item\"\n                  (click)=\"closeAllContextMenus($event); deleteFolderClick($event, subfolder)\">\n                  <i class=\"pi pi-trash\"></i>\n                  <p>Elimina cartella</p>\n                </div>\n              </div>\n            </ng-template>\n          </p-overlayPanel>\n\n        </div>\n        <div class=\"tal-subfolder\">\n          <ng-container *ngTemplateOutlet=\"TalFolder; context: { $implicit: subfolder }\"></ng-container>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"newItemFolder === folder\">\n      <ng-container *ngTemplateOutlet=\"NewItemTemplate\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngFor=\"let file of folder.files\">\n      <div *ngIf=\"isVisibile(file)\" class=\"tal-file\"\n        (contextmenu)=\"closeAllContextMenus($event); fileOverlayPanel.show($event)\" [class.opened]=\"file===openedFile\">\n        <div class=\"tal-file-title\" (click)=\"closeAllContextMenus($event); openFile(file)\"\n          (dblclick)=\"closeAllContextMenus($event); startEditing(folder, file)\">\n          <ng-container *ngIf=\"editingItem!=file;else ItemEditingTemplate\">\n            <p>{{file.name}}</p>\n          </ng-container>\n        </div>\n        <div class=\"tal-row-settings\" *ngIf=\"editingItem!=file\">\n          <div class=\"tal-row-button\" (click)=\"fileOverlayPanel.show($event)\">\n            <i class=\"pi pi-ellipsis-h\"></i>\n          </div>\n        </div>\n\n        <p-overlayPanel #fileOverlayPanel>\n          <ng-template pTemplate>\n            <div class=\"tal-contextmenu-container\">\n              <div class=\"tal-contextmenu-item\" (click)=\"closeAllContextMenus($event); startEditing(folder, file)\">\n                <i class=\"pi pi-pencil\"></i>\n                <p>Rinomina file</p>\n              </div>\n              <div class=\"tal-contextmenu-item\" (click)=\"closeAllContextMenus($event); deleteFileClick($event, file)\">\n                <i class=\"pi pi-trash\"></i>\n                <p>Elimina file</p>\n              </div>\n            </div>\n          </ng-template>\n        </p-overlayPanel>\n      </div>\n    </ng-container>\n  </div>\n</ng-template>\n\n<ng-template #ItemEditingTemplate>\n  <input #nameEditing class=\"tal-item-input\" type=\"text\" [(ngModel)]=\"editingValue\" (blur)=\"saveEditing()\"\n    (keyup.enter)=\"saveEditing()\" (keyup.esc)=\"cancelEditing()\" (input)=\"editItemChange()\"\n    [class.error]=\"editingItemError\">\n</ng-template>\n\n<ng-template #NewItemTemplate>\n  <div class=\"tal-new-item\">\n    <input #newItemName class=\"tal-item-input\" type=\"text\" [(ngModel)]=\"newItemValue\" (blur)=\"saveNewItem()\"\n      (keyup.enter)=\"saveNewItem()\" (keyup.esc)=\"cancelNewItem()\" (input)=\"newItemChange()\"\n      [class.error]=\"newItemError\">\n  </div>\n</ng-template>\n\n<p-confirmDialog acceptLabel=\"Elimina\" acceptIcon=\"pi pi-trash\" rejectLabel=\"Annulla\">\n</p-confirmDialog>\n","import { Component, OnInit, ViewChild } from '@angular/core';\n\nimport { FsService, Tar } from 'src/app/services/fs-service/fs.service';\nimport { ProblemDescriptor, ServiceDescriptor } from 'src/app/services/problem-manager-service/problem-manager.service';\nimport { PythonCompilerService } from 'src/app/services/python-compiler-service/python-compiler.service';\nimport { CodeEditorWidgetComponent } from 'src/app/widgets/code-editor/code-editor-widget/code-editor-widget.component';\nimport { EditorFilesWidgetComponent, TalFile } from 'src/app/widgets/code-editor/editor-files-widget/editor-files-widget.component';\nimport { ConsoleWidgetComponent } from 'src/app/widgets/console/console-widget/console-widget.component';\n\n@Component({\n  selector: 'tal-editor-widget',\n  templateUrl: './editor-widget.component.html',\n  styleUrls: ['./editor-widget.component.scss']\n})\nexport class EditorWidgetComponent implements OnInit {\n  public openedFile?: TalFile;\n\n  public fs;\n  public driver;\n  public selectedProblem?: ProblemDescriptor;\n  public selectedService?: ServiceDescriptor;\n\n  @ViewChild(\"fileWidget\") public fileWidget!: EditorFilesWidgetComponent;\n  @ViewChild(\"editorWidget\") public editorWidget!: CodeEditorWidgetComponent;\n  @ViewChild(\"consoleWidget\") public consoleWidget!: ConsoleWidgetComponent;\n  \n\n  constructor(\n    private _fs: FsService,\n    private python:PythonCompilerService,\n  ) {\n    this.fs = _fs;\n    this.driver = this.fs.getDriver('pyodide')\n  }\n\n  ngOnInit(): void {\n    this.python.driver?.subscribeStdout(true,(msg)=>{this.onStdout(msg)})\n    this.python.driver?.subscribeStderr(true,(msg)=>{this.onStderr(msg)})\n  }\n  \n\n  public onStdout(data:string){\n    //alert(\"STDOUT: \"+data)\n    this.consoleWidget.print(data)\n  }\n\n  public onStderr(data:string){\n    //alert(\"STDERR: \"+data)\n    this.consoleWidget.print(data)\n  }\n\n  public onStdin(msg:string){\n    this.consoleWidget.print(msg)\n  }\n\n  public onProblemChanged(selectedProblem: ProblemDescriptor){\n    console.log(\"onProblemChanged:\",selectedProblem)\n    this.selectedProblem=selectedProblem;\n  }\n\n  public onServiceChanged(selectedService: ServiceDescriptor){\n    console.log(\"onServiceChanged:\",selectedService)\n    this.selectedService=selectedService;\n    this.selectedProblem=selectedService.parent;\n  }\n\n  async onAttachments(data: ArrayBuffer){\n    console.log(\"onAttachments:\",data)\n    if(!this.selectedProblem){return;}\n    let name = this.selectedProblem.name\n\n    /*\n    let path = \"/data/\"+name+\".tar\"\n    \n    await this.driver?.writeFile(path,data)\n    this.fileWidget.refreshRoot()    \n    \n    await this.extractTar(path)\n  }\n\n  async extractTar(path:string){\n    let exists = await this.driver?.exists(path)\n    let basedir = path.split(\"/\").slice(0,-1).join(\"/\") + \"/\"\n    let filename = path.split(\"/\").splice(-1)[0]\n    let basename = filename.split(\".\").slice(0,-1).join('.')\n    let extractdir = basedir + basename + \"/\"\n    await this.driver?.createDirectory(extractdir)\n    let data = await this.driver?.readFile(path, true)\n    */\n    if (!(data instanceof ArrayBuffer ) ) {return;}\n    Tar.unpack(data, async (files,folders) => {\n      console.log(\"extractTar:unpack:files\",files)\n      console.log(\"extractTar:unpack:folders\",folders)\n  \n      for(var idx in folders){\n        console.log(\"extractTar:createDirectory:\")\n        let folder = folders[idx]\n        let path = '/data/' + folder.path\n        console.log(\"extractTar:createDirectory:\",path)\n        await this.driver?.createDirectory(path)\n      }\n      console.log(\"extractTar:createDirectory:DONE\")\n      for(var idx in files){\n        console.log(\"extractTar:writeFile:\")\n        let file = files[idx]\n        let path = '/data/' + file.path\n        let content = file.content\n        console.log(\"extractTar:writeFile:\",path,content)\n        await this.driver?.writeFile(path, content)\n      }\n      console.log(\"extractTar:writeFile:DONE\")\n      this.fileWidget.refreshRoot()\n    });\n   \n  }\n\n  public openFile(file: TalFile) {\n    this.openedFile = file;\n    \n  }\n\n  public editorDidChange(event: Event){\n    console.log(\"editorDidChange:\")\n    this.saveFile()\n  }\n\n  public editorDidInput(event: InputEvent){\n    console.log(\"Input: \", this.editorWidget.value)\n    this.saveFile()\n  }\n\n  public saveFile(){\n    if ( this.openedFile ){ // && this.needSave ){\n      console.log(\"saveFile:\\n\", this.openedFile.path, \"\\n\", this.editorWidget.value)\n      this.driver?.writeFile(this.openedFile.path, this.editorWidget.value)\n    }\n  }\n\n  public runProject(){\n    this.consoleWidget.print(\"python main.py\\n\")\n    this.saveFile();\n     \n \n    this.python.runProject().then(()=>{\n\n    })\n  }\n\n  public testConnectAPI(){\n    this.consoleWidget.print(\"python free_sum_mysimplebot.py\\n\")\n    this.saveFile();\n    \n \n    this.python.testConnectAPI(this.consoleWidget).then(()=>{\n\n    })\n  }\n}\n","\n<div class=\"tal-editor\">\n  <p-splitter [style]=\"{'height': '100%'}\" [panelSizes]=\"[15,50,35]\" [minSizes]=\"[12,20,20]\">\n    <ng-template pTemplate>\n      <div class=\"tal-editor-files\">\n        <tal-editor-files-widget #fileWidget (open)=\"openFile($event)\"></tal-editor-files-widget>\n      </div>\n    </ng-template>\n    <ng-template pTemplate>\n      <ng-container *ngIf=\"openedFile; else NoSelectedFileTemplate\">\n        <div class=\"tal-code-editor-container\">\n          <div class=\"tal-code-editor-header\">\n            <h3>{{openedFile!.name}}</h3>\n            <button pButton icon=\"pi pi-play\" (click)=\"runProject()\" >RUN</button>\n            <button pButton icon=\"pi pi-play\" (click)=\"testConnectAPI()\" >API CONNECT</button>\n          </div>\n          <div class=\"tal-code-editor\">\n            <tal-code-editor-widget #editorWidget\n              [(ngModel)]=\"openedFile!.content\" \n              lang=\"python\" \n              (change)=\"editorDidChange($event)\" \n              (input)=\"editorDidInput($event)\">\n            </tal-code-editor-widget>\n          </div>\n        </div>\n      </ng-container>\n      <ng-template #NoSelectedFileTemplate>\n        <div class=\"tal-center-page\">\n          <p class=\"tal-placeholder-message\">Seleziona o crea un file</p>\n        </div>\n      </ng-template>\n    </ng-template>\n    <ng-template pTemplate>\n      <tal-console-widget #consoleWidget \n        (stdin)=\"onStdin($event)\" \n        (attachments)=\"onAttachments($event)\"\n        (problemChanged)=\"onProblemChanged($event)\"\n        (serviceChanged)=\"onServiceChanged($event)\"\n        >\n      </tal-console-widget>\n    </ng-template>\n  </p-splitter>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'tal-file-viewer-widget',\n  templateUrl: './file-viewer-widget.component.html',\n  styleUrls: ['./file-viewer-widget.component.scss']\n})\nexport class FileViewerWidgetComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>file-viewer-widget works!</p>\n","import { Component, EventEmitter, Output, ViewChild, NgZone, ElementRef } from '@angular/core';\nimport {Pipe, PipeTransform} from '@angular/core';\nimport { Terminal, TerminalService } from 'primeng/terminal';\nimport { Subscription } from 'rxjs';\nimport { ApiService, Meta } from 'src/app/services/api-service/api.service';\nimport { ProblemManagerService, ServiceDescriptor, ProblemDescriptor, ArgsMap, ArgDescriptor } from 'src/app/services/problem-manager-service/problem-manager.service';\n\n\nexport class ServiceMenuEntry {\n  constructor(\n    public problem = \"\",\n    public service = \"\",\n    public descriptor: ServiceDescriptor,\n  ){}\n}\n\n\n\n@Pipe({name: 'cleanupName'})\nexport class CleanUpNamePipe implements PipeTransform {\n    transform(name:string): string {\n        name = name.replace(new RegExp('[-_ ]+','g'), \" \") \n        name = name.replace(\"[^a-zA-Z0-9 ]+\", \"\") \n        name = name.charAt(0).toUpperCase() + name.slice(1);\n        return name\n    }\n}\n\n\n\n\n@Component({\n  selector: 'tal-console-widget',\n  templateUrl: './console-widget.component.html',\n  styleUrls: ['./console-widget.component.scss'],\n  //encapsulation: ViewEncapsulation.None,\n  providers: [TerminalService]\n})\nexport class ConsoleWidgetComponent {\n\n  @Output('input') public onInput = new EventEmitter<InputEvent>();\n  @Output('stdin') public onStdin = new EventEmitter<string>();\n  @Output('problemListUpdate') public onProblemListUpdate = new EventEmitter<Map<string, Meta>>();\n  @Output('problemChanged') public onProblemSelected = new EventEmitter<ProblemDescriptor>();\n  @Output('serviceChanged') public onServiceSelected = new EventEmitter<ServiceDescriptor>();\n  @Output('attachments') public onAttachments = new EventEmitter<ArrayBuffer>();\n\n  @ViewChild(\"terminal\") public terminal!: Terminal;\n  @ViewChild(\"output\") public output!: ElementRef;\n  @ViewChild(\"sdtinInput\") public sdtinInput!: ElementRef;\n\n\n\n  public outputText: string = \"\";\n\n\n  commandSub: Subscription\n  servicesMenu = new Array<ServiceMenuEntry>();\n  selectedProblem?: ProblemDescriptor;\n  selectedService?: ServiceMenuEntry;\n  selectedArgs?: ArgsMap;\n\n\n\n  constructor( public terminalService: TerminalService,\n               public zone: NgZone,\n               public api: ApiService,\n               public pm: ProblemManagerService\n             )\n  {\n    this.commandSub = this.terminalService.commandHandler.subscribe(command => { this.execCommand(command) });\n\n  }\n  ngOnInit() {\n    this.apiProblemList();\n  }\n  ngOnDestroy() {\n    this.commandSub.unsubscribe();\n  }\n\n\n  clearOutput() {\n    this.zone.run(() => this.outputText = \"\")\n  }\n\n  print(content: string, end = \"\\n\") {\n    this.zone.run(() => this.outputText += content + end);\n\n    // Scroll #console-bottom-scroll to bottom\n    setTimeout(() => {\n      const scrollEl = document.getElementById(\"console-bottom-scroll\");\n      if (scrollEl) {\n        scrollEl.scrollTop = scrollEl.scrollHeight;\n        console.log(scrollEl.scrollTop, scrollEl.scrollHeight)\n      }\n    });\n  }\n\n  async onApiError(message: string) {\n    console.log(\"API Error: \", message)\n  }\n  \n  async argDidChange(key:string,event:Event){\n    console.log('argDidChange:',key,event)\n  }\n\n  async argDidReset(key:string,event:Event){\n    console.log('argDidReset:',key,event)\n    if(!this.selectedArgs){return}\n    let arg = this.selectedArgs.get(key)\n    if (!arg){return}\n    arg.value = arg.default\n  }\n\n  async reloadProblemList(){\n    this.selectedProblem = undefined;\n    this.selectedService = undefined;\n    this.selectedArgs = undefined;\n    this.servicesMenu = []\n    this.apiProblemList()\n  }\n\n  async updateProblemsUI() {\n    let menuServices = new Array<ServiceMenuEntry>();\n    this.pm.problemList.forEach((problemDesc)=>{      \n      problemDesc.services.forEach((serviceDesc)=>{\n        var pattern = new RegExp('[-_ ]+','g');\n        var serviceLabel = serviceDesc.name.replace(pattern, \" \")\n        let serviceEntry = new ServiceMenuEntry(problemDesc.name,serviceLabel,serviceDesc)\n        menuServices.push(serviceEntry)\n      })\n    })\n\n    console.log('updateProblemsUI:menuServices:', menuServices)\n    \n    this.zone.run(() => { \n      this.servicesMenu = menuServices\n    })\n    \n  }\n\n  \n  async apiProblemList() {\n    let req = this.api.problemList(async (problemList) => {\n      console.log('apiProblemList:problemList:', problemList)\n      this.pm.updateProblems(problemList)\n      this.onProblemListUpdate.emit(problemList)\n      await this.updateProblemsUI()\n    });\n    req.onError = (error) => { this.onApiError(error) };\n  }\n\n  \n\n  async didSelectProblem() {\n    console.log('didSelectProblem:', this.selectedProblem)\n    if (!this.selectedProblem){return}\n    this.pm.selectProblem(this.selectedProblem)\n    this.onProblemSelected.emit(this.selectedProblem)\n  }\n\n  async didSelectService() {\n    console.log('didSelectService:', this.selectedService)\n    if (!this.selectedService){return}\n    let serviceDesc = this.selectedService!.descriptor\n    this.pm.selectService(serviceDesc)\n    this.selectedArgs = serviceDesc.args\n    console.log('didSelectService:selectedArgs:', this.selectedArgs)\n    \n    this.onServiceSelected.emit(serviceDesc)\n  }\n\n  async apiDownloadAttachment() {\n    console.log('apiDownloadAttachment:', this.selectedService)\n    if (!this.selectedService) { return }\n    let problem = this.selectedService.descriptor.parent;\n    if(!problem) {return;}\n    \n    let onAttachment = () => { console.log(\"Attachment packet received\") };\n    let onAttachmentInfo = (info: any) => { console.log('apiDownloadAttachment:info:', info) };\n\n    let onData = (data: ArrayBuffer) => {\n      console.log(\"apiDownloadAttachment:onData:\", data);\n      this.onAttachments.emit(data);\n    };\n\n    let req = this.api.GetAttachment(problem.name, onAttachment, onAttachmentInfo, onData);\n    req.onError = (error) => { this.onApiError(error) };\n\n  }\n\n\n  public testOutput() {\n    this.print(\"python main.py\\n\")\n    this.apiProblemList()\n  }\n\n\n  public sendStdin() {\n    let msg = this.sdtinInput.nativeElement.value ?? \"\"\n    msg = msg.trim()\n    console.log(\"sendStdin:\", this.sdtinInput)\n    if (msg == \"\") { return }\n\n    this.sdtinInput.nativeElement.value = \"\"\n    this.onStdin.emit(msg);\n  }\n\n  public sendOnEnter(event: KeyboardEvent) {\n    if (event.key == 'Enter') { this.sendStdin(); }\n  }\n\n\n  injectCommand(command: string) {\n\n    let event = new KeyboardEvent('keydown', { 'key': 'Enter' })\n    // https://stackoverflow.com/a/44190874/320926\n    // https://stackoverflow.com/a/30003941/320926\n    // console.log(this.terminal.el)\n\n    var enterKey = new KeyboardEvent('keydown', {\n      code: 'Enter',\n      key: 'Enter',\n      charCode: 13,\n      keyCode: 13\n    });\n\n    this.zone.run(() => {\n      let term = this.terminal.el.nativeElement.children[0];\n      this.terminal.focus(term);\n      this.terminalService.sendCommand(command)\n      this.terminal.command = command\n\n\n      this.terminal.handleCommand(enterKey);\n\n      //this.terminal.el.nativeElement.dispatchEvent(enterKey);\n    })\n\n\n  }\n\n  execCommand(command: string) {\n    let params = command.split(\" \")\n    let operation = params.splice(0, 1)[0]\n    console.log('tokens: ', params)\n    console.log('command: ', command)\n    let response = 'Unknown command: ' + command;\n    switch (operation) {\n      case \"echo\": response = params.join(\" \"); break;\n      case \"date\": response = new Date().toDateString(); break;\n    }\n\n    this.terminalService.sendResponse(response);\n  }\n\n\n\n\n\n  /*\n  public term: Terminal;\n  container?: HTMLElement | null;\n\n  constructor() {\n    this.term = new Terminal();\n  }\n\n  ngOnInit(){\n    this.container = document.getElementById('xterm-container');\n    if (this.container){\n      this.term.open(this.container);\n      this.term.writeln('Welcome to xterm.js');\n\n      let myBuffer:string[] = [];\n\n      // This is an xterm.js instance\n      this.term.onKey(( {key, domEvent} ) => {\n        myBuffer.push(key);\n        this.term.write(key)\n      });\n      \n      this.term.onLineFeed(() => {\n        let command = myBuffer.join('');  // Or something like that\n        myBuffer = [];  // Empty buffer\n        //this.term.write(command)\n        this.execCommand(command)\n        return false\n      });\n\n\n\n    }\n  }\n\n  public execCommand(command:string){\n    alert(command)\n  }\n\n\n\n  print(content:string){\n    this.term.writeln(content);\n  }\n\n  */\n\n\n}\n\n\n","<div class=\"console-widget-main\">\n    <div class=\"console-widget-api\">\n        <!-- API: PROBLEMS and SERVICES -->\n        <div class=\"console-widget-api-row console-widget-api-problem\">\n            <button pButton class=\"p-button-danger\" icon=\"pi pi-refresh\"\n                            title=\"Refresh\" pTooltip=\"Refresh\"\n                            (click)=\"reloadProblemList()\"></button>\n            <p-dropdown placeholder=\"Seleziona un problema\" class=\"console-widget-problem-selector\" \n                        [options]=\"servicesMenu\" [group]=\"false\" [(ngModel)]=\"selectedService\"\n                        (onChange)=\"didSelectService()\" [style]=\"{'height': '55px', 'padding': 0}\">\n                  \n                  \n                  <ng-template let-group pTemplate=\"group\">\n                      <div class=\"console-widget-problem-group\">\n                      </div>\n                  </ng-template>\n\n                  \n                  <ng-template let-option pTemplate=\"selectedItem\">\n                    <div class=\"console-widget-problem-selected\">\n                      <span class=\"problem-label\">{{option.problem}}</span>\n                      <span class=\"service-label\">{{option.service}}</span>\n                    </div>\n                  </ng-template>\n                  \n\n                  <ng-template let-option pTemplate=\"item\">\n                    <div class=\"console-widget-problem-item\">\n                      <span class=\"problem-label\">{{option.problem}}</span>\n                      <span class=\"service-label\">{{option.service}}</span>\n                    </div>\n                  </ng-template>\n\n\n            </p-dropdown>\n            <button pButton class=\"p-button-help\" icon=\"pi pi-download\" (click)=\"apiDownloadAttachment()\"\n                    title=\"Download Attachments\" pTooltip=\"Scarica allegati\"></button>\n        </div>\n\n        <!-- ROW:title -->\n        <div class=\"console-widget-api-args-row\">\n          <div class=\"console-widget-api-args-row-title\" >Arguments</div>\n        </div>\n        \n        <p-splitter class=\"console-widget-api-row console-widget-splitter\" [style]=\"{'width': '100%'}\" \n                    layout=\"vertical\" [panelSizes]=\"[1,1]\" [minSizes]=\"[3,3]\">\n\n          <ng-template pTemplate>\n            <!-- API: ARGS -->\n            <div class=\"console-widget-api-row console-widget-api-args\">\n              <!-- ROW: empty -->\n              <div class=\"console-widget-api-args-row stretch-flex\" *ngIf=\"!selectedArgs || selectedArgs.size==0\">\n                <div class=\"console-widget-api-args-row-no-params\">\n                  <div>No argument found</div>\n                </div>\n              </div>\n              \n              <!-- ROW: arg -->\n              <div class=\"console-widget-api-args-row\" *ngFor=\"let arg of selectedArgs | keyvalue\"> \n                  <!-- CELL: info -->\n                  <div class=\"console-widget-api-args-row-info\">\n                    <i class=\"pi pi-info-circle\" [pTooltip]=\"arg.value.regex+''\"></i>\n                  </div>\n                  <!-- CELL: name -->\n                  <div class=\"console-widget-api-args-row-name\">{{arg.value.name}}</div>\n\n                  <!-- CELL: field -->\n                  <div class=\"console-widget-api-args-row-field\">\n                    <input pInputText type=\"text\" class=\"top-bar-url-input p-inputtext-sm\"\n                      [placeholder]=\"arg.value.default\" [(ngModel)]=\"arg.value.value\"\n                      (change)=\"argDidChange(arg.value.key,$event)\">  \n                  </div>\n\n                  <!-- CELL: reset -->\n                  <div class=\"console-widget-api-args-row-actions\">\n                    <button pButton class=\"p-button\" icon=\"pi pi-trash\" (click)=\"argDidReset(arg.value.key,$event)\"\n                      title=\"Reset to default\" pTooltip=\"Reset to default\"></button>\n                  </div>\n                </div>\n              </div>\n          </ng-template>\n    \n\n        <!--\n        <ng-template pTemplate>\n          <div class=\"console-widget-terminal\">\n\n            <div class=\"console-widget-label\">Terminal</div>\n            <div class=\"console-widget-terminal-scroll\">\n              <p-terminal class=\"console-widget-terminal-shell\" #terminal welcomeMessage=\"Welcome to TALight Desktop\"\n                prompt=\"talight$&nbsp;\"></p-terminal>\n            </div>\n          </div>\n        </ng-template>\n        -->\n\n\n        <ng-template pTemplate>\n          <div class=\"console-widget-output\">\n            <!-- <div id=\"xterm-container\"></div> -->\n            <div class=\"console-widget-label\">Output</div>\n            <div class=\"console-widget-output-scroll\" id=\"console-bottom-scroll\">\n              <pre class=\"console-widget-output-text\" #output>{{outputText}}</pre>\n            </div>\n            <div class=\"console-widget-output-stdin\">\n              <button pButton class=\"p-button-danger\" icon=\"pi pi-refresh\" (click)=\"clearOutput()\" title=\"Clear output\"\n                pTooltip=\"Pulisci output\"></button>\n              <input #sdtinInput class=\"console-widget-output-stdin-input\" (keydown)=\"sendOnEnter($event)\"\n                placeholder=\"Input del programma\" />\n              <button pButton icon=\"pi pi-send\" (click)=\"sendStdin()\" title=\"Send\" pTooltip=\"Invia\"></button>\n            </div>\n          </div>\n        </ng-template>\n      </p-splitter>\n    </div>\n\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ConsoleWidgetComponent } from './console-widget/console-widget.component';\nimport { TerminalModule } from 'primeng/terminal';\nimport { DropdownModule } from 'primeng/dropdown';\nimport { SplitterModule } from 'primeng/splitter';\nimport { FormsModule } from '@angular/forms';\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\nimport { TooltipModule } from 'primeng/tooltip';\n\n@NgModule({\n  declarations: [\n    ConsoleWidgetComponent\n  ],\n  imports: [\n    CommonModule,\n    TerminalModule,\n    DropdownModule,\n    SplitterModule,\n    FormsModule,\n    //OverlayPanelModule,\n    ConfirmDialogModule,\n    TooltipModule\n  ],\n  exports: [\n    ConsoleWidgetComponent\n  ],\n  //providers: [ConfirmationService],\n})\nexport class ConsoleModule { }\n","import { Component, ElementRef, NgZone, OnInit, ViewChild } from '@angular/core';\nimport { AutoComplete } from 'primeng/autocomplete';\nimport { ApiService } from 'src/app/services/api-service/api.service';\nimport { AppTheme, ThemeService } from 'src/app/services/theme-service/theme.service';\n\n@Component({\n  selector: 'tal-topbar-widget',\n  templateUrl: './topbar-widget.component.html',\n  styleUrls: ['./topbar-widget.component.scss']\n})\nexport class TopbarWidgetComponent implements OnInit {\n\n  @ViewChild(\"urlInput\") public urlInput?: AutoComplete;\n  \n  url = \"wss://ta.di.univr.it/sfide\";\n  urlCache:string[] = []\n  escapeRegEx = /[.*+?^${}()|[\\]\\\\]/g\n  \n  constructor( public readonly themeService: ThemeService, \n               public api: ApiService,\n               public zone: NgZone,\n             ) {\n    this.api.setUrl(this.url)\n  }\n\n  ngOnInit(): void {\n    this.urlCache = [...this.api.urlCache]\n  }\n\n  public get changeThemIcon(): string {\n    return this.themeService.currentTheme == AppTheme.dark ? 'pi-sun' : 'pi-moon';\n  }\n\n  public toggleTheme() {\n    this.themeService.toggleTheme();\n  }\n\n  filterSuggestions(event:any) {\n    let query = event.query.replace(this.escapeRegEx, '\\\\$&')\n    let filter = new RegExp(\".*\"+query+\".*\")\n    let urlCache:string[] = []\n    this.api.urlCache.forEach( (url:string) => {\n      if(url.match(filter)){\n        urlCache.push(url)\n      }\n    });\n    this.urlCache=urlCache\n  }\n\n  public changeURL(event:Event) {\n    console.log(\"changeURL:event:\", event)\n    let url = this.url;\n    console.log(\"changeURL:urlCache:before:\",this.urlCache)\n    if( !this.api.setUrl(url) ){\n      console.log(\"changeURL:setURL:failed\")\n      this.zone.run( ()=>{ this.url = \"failed\" }) // this.api.url; } )\n      return\n    }else{\n      this.urlCache = this.api.urlCache\n    }\n    console.log(\"changeURL:urlCache:after:\", this.urlCache )\n    console.log(\"changeURL:url:\", this.url )\n  }\n\n  public removeURL(url:string, event:Event) {\n    if(event){ event.preventDefault();event.stopPropagation();event.stopImmediatePropagation(); }\n    \n    console.log(\"changeURL:urlCache:before:\",this.urlCache)\n    if( !this.api.removeFromCache(url) ){\n      console.log(\"changeURL:removeURL:done\")\n    }\n    this.urlCache = this.api.urlCache\n    \n\n\n    console.log(\"changeURL:urlCache:after:\",this.urlCache)\n    console.log(\"changeURL:url:\",url)\n  }\n  \n}\n","<div class=\"tal-topbar\">\n    <div class=\"tal-brand\">\n        <h1>TALight Desktop</h1>\n    </div>\n\n    <div class=\"tal-buttons\">\n\n        <p-autoComplete #urlInput class=\"top-bar-url-input p-inputtext-sm\"\n            (placeholder)=\"urlCache\"  [(ngModel)]=\"url\"\n            (change)=\"changeURL($event)\" (onBlur)=\"changeURL($event)\" [suggestions]=\"urlCache\"\n            (completeMethod)=\"filterSuggestions($event)\" [dropdown]=\"true\">\n\n            <ng-template let-url pTemplate=\"item\">\n                <div class=\"url-item\">\n                    <div class=\"url-item-label\">{{url}}</div>\n                    <button pButton icon=\"pi pi-trash\" pTooltip=\"Remove URL\" (click)=\"removeURL(url, $event)\"></button>\n                </div>\n            </ng-template>\n\n        </p-autoComplete>        \n\n        <button pButton icon=\"pi {{changeThemIcon}}\" (click)=\"toggleTheme()\"></button>\n    </div>\n</div>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TopbarWidgetComponent } from './topbar-widget/topbar-widget.component';\n\nimport { AutoCompleteModule } from 'primeng/autocomplete';\nimport { InputTextModule } from 'primeng/inputtext';\nimport { TooltipModule } from 'primeng/tooltip';\nimport { ButtonModule } from 'primeng/button';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [\n    TopbarWidgetComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AutoCompleteModule,\n    InputTextModule,\n    TooltipModule,\n    ButtonModule,\n  ],exports:[\n    TopbarWidgetComponent\n  ]\n})\nexport class TopbarModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","/* (ignored) */"],"names":["ConnectionManagerService","constructor","router","api","isConnected","_isConnected","url","_url","value","setUrl","disconnect","navigate","factory","providedIn","createFs","IndexeddbFsDriver","databaseVersion","objectStoreName","databaseName","rootDirectoryName","rootDir","fs","options","ready","readFile","fullpath","binary","exists","createDirectory","res","writeFile","content","data","length","readDirectory","scanDirectory_recursive","scanDirectory","path","recursive","rootNode","name","split","reverse","folders","files","console","log","dirContent","key","element","childNode","fullPath","push","directories","delete","remove","FsServiceTest","useDriver","driverName","driver","getDriver","createTestFiles","PyodideMessageType","PyodideDriver","Worker","URL","import","meta","Map","TextEncoder","TextDecoder","worker","onmessage","event","didRecieve","mount","unmount","response","message","type","requestHandler","requestIndex","get","uid","removeRequest","msgSent","request","msgRecived","resolvePromise","Ready","didReceiveReady","InstallPackages","didReceiveInstallPackages","ExecuteCode","didReceiveExecuteCode","ExecuteFile","didReceiveExecuteFile","SubscribeStdout","didReceiveSubscribeStdout","SubscribeStderr","didReceiveSubscribeStderr","SendStdin","didReceiveSendStdin","CreateDirectory","didReceiveCreateDirectory","ReadDirectory","didReceiveReadDirectory","ScanDirectory","didReceiveScanDirectory","WriteFile","didReceiveWriteFile","ReadFile","didReceiveReadFile","Delete","didReceiveDelete","Exists","didReceiveExists","args","contents","toString","result","onStdout","onStderr","pathSent","pathRecived","replacer","ArrayBuffer","buffer","Uint8Array","Array","from","node","JSON","parse","jsonReplacer","sendMessage","timestamp","Date","now","promiseResolver","resultPromise","Promise","resolve","reject","set","postMessage","requestUID","installPackages","packages","executeCode","code","executeFile","subscribeStdout","enable","msg","undefined","subscribeStderr","sendStdin","parent","binDecoder","decode","toArrayBuffer","binEncoder","encode","timestap","getTime","seed","Math","floor","random","ApiService","PythonCompilerService","_fs","registerDriver","createPythonProject","configFile","configContent","stringify","PythonConfig","bot","readPythonConfig","config","runProject","PACKAGES","stdout","MAIN","PythonCompilerMessageInterfaceType","onApiError","alert","consoleWidget","print","cmdConnect","sendBinary","apiConnect","problem_name","service","onConnectionBegin","onConnectionStart","onConnectionClose","onData","req","Connect","onError","testConnectAPI","NgZone","DemoViewComponent","zone","ngOnInit","refreshOutput","run","output","apiProblemList","onSuccess","problemList","apiGetAttachment","onAttachment","onAttachmentInfo","GetAttachment","setTimeout","tal","isOpen","selectors","decls","vars","consts","template","i0","ctx","ElementRef","EventEmitter","QueryList","OverlayPanel","Tar","ctx_r10","ctx_r12","ctx_r28","ctx_r31","ctx_r33","ctx_r36","ctx_r38","ctx_r40","ctx_r54","ctx_r58","ctx_r60","ctx_r62","ctx_r64","EditorFilesWidgetComponent","confirmationService","python","emptyNode","bindCollapseEvent","test","then","refreshRoot","folder","root","change","emit","rows","document","getElementsByClassName","i","classList","contains","row","addEventListener","handleClickEvent","add","preventDefault","stopPropagation","target","newParent","safeCount","parentElement","toggle","closeAllContextMenus","panels","forEach","p","hide","openFile","file","openedFile","open","toggleHidden","showHidden","isVisibile","fsitem","isHidden","startsWith","startEditing","item","editingItem","editingValue","editingItemFolder","editingItemError","nameEditingElement","nativeElement","focus","saveEditing","trim","cancelEditing","editItemChange","existingFile","find","f","existingFolder","deleteFileClick","confirm","icon","accept","deleteFile","currentFolder","deleteFolderClick","deleteFolder","syncFilesystem","addNewItem","newItemValue","newItemFolder","newItemType","newItemError","newItemNameElement","cancelNewItem","saveNewItem","newItemChange","HTMLInputElement","tarball","arrayBuffer","unpack","idx","export","items","treeToList","pack","tarname","triggerDownload","filename","mime","a","createElement","blob","Blob","window","createObjectURL","style","display","download","href","body","appendChild","click","removeChild","revokeObjectURL","viewQuery","EditorWidgetComponent","onStdin","onProblemChanged","selectedProblem","onServiceChanged","selectedService","onAttachments","fileWidget","editorDidChange","saveFile","editorDidInput","editorWidget","TerminalService","ProblemManagerService","ServiceDescriptor","ProblemDescriptor","ArgsMap","ServiceMenuEntry","problem","descriptor","CleanUpNamePipe","transform","replace","RegExp","charAt","toUpperCase","slice","pure","ConsoleWidgetComponent","terminalService","pm","commandSub","commandHandler","subscribe","command","execCommand","ngOnDestroy","unsubscribe","clearOutput","outputText","end","scrollEl","getElementById","scrollTop","scrollHeight","argDidChange","argDidReset","selectedArgs","arg","default","reloadProblemList","servicesMenu","updateProblemsUI","menuServices","problemDesc","services","serviceDesc","pattern","serviceLabel","serviceEntry","updateProblems","onProblemListUpdate","error","didSelectProblem","selectProblem","onProblemSelected","didSelectService","selectService","onServiceSelected","apiDownloadAttachment","info","testOutput","sdtinInput","sendOnEnter","injectCommand","KeyboardEvent","enterKey","charCode","keyCode","term","terminal","el","children","sendCommand","handleCommand","params","operation","splice","join","toDateString","sendResponse"],"sourceRoot":"webpack:///","x_google_ignoreList":[41]}